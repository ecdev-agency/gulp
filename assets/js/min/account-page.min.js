"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(a="Object"===a&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o,r,n=[],s=!0,i=!1;try{for(a=a.call(e);!(s=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);s=!0);}catch(e){i=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var phoneUser=document.querySelector("#phone_user_def"),phoneRefer=document.querySelector("#referal_phone_def");phoneUser&&window.intlTelInput(phoneUser,{autoHideDialCode:!1,separateDialCode:!1,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",hiddenInput:"phone_user",onlyCountries:["us"],initialCountry:"us",preferredCountries:!1}),phoneRefer&&window.intlTelInput(phoneRefer,{autoHideDialCode:!1,separateDialCode:!1,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",hiddenInput:"referal_phone",onlyCountries:["us"],initialCountry:"us",preferredCountries:!1});var loader={message:'<div class="account__loader"></div>',overlayCSS:{background:"#fff",opacity:.6},css:{padding:0,margin:0,width:"100%",top:"0%",left:"0%",textAlign:"center",color:"#000",border:"none",backgroundColor:"transparent",cursor:"wait"}},loader_default={message:"",overlayCSS:{background:"#fff",opacity:.6},css:{padding:0,margin:0,width:"100%",top:"0%",left:"0%",textAlign:"center",color:"#000",border:"none",backgroundColor:"transparent",cursor:"wait"}};jQuery(document).ready(function(i){jQuery("img.svg").each(function(){var t=jQuery(this),a=t.attr("id"),o=t.attr("class"),e=t.attr("src");jQuery.get(e,function(e){e=jQuery(e).find("svg");void 0!==a&&(e=e.attr("id",a)),!(e=(e=void 0!==o?e.attr("class",o+" replaced-svg"):e).removeAttr("xmlns:a")).attr("viewBox")&&e.attr("height")&&e.attr("width")&&e.attr("viewBox","0 0 "+e.attr("height")+" "+e.attr("width")),t.replaceWith(e)},"xml")}),i('[type="tel"]').mask("(999)-999-9999"),i(document).on("keypress","input,select,textarea",function(e){13==e.which&&(e.preventDefault(),e=i("[tabindex="+(+this.tabIndex+1)+"]"),console.log(e.length),(e=!e.length?i("[tabindex=1]"):e).focus())}),i(document).on("click",".form-group--viewpin",function(e){i(this).toggleClass("active");var t=i(this).parent().find("input");"password"==t.attr("type")?t.prop("type","text"):t.prop("type","password")}),i(document).on("click",".account__menu a",function(e){i(".account__menu").find(".active").removeClass("active"),i(this).parent().addClass("active"),i("#main").addClass("account__preloader")}),i(document).on("click",".account__refer-list--card---footer, .account__header-btn",function(e){i("#main").addClass("account__preloader")}),i(document).on("keyup",".account #password, .account #password_confirm, .account #password_modal, .account #password_confirm_modal",function(e){var t=i(this);4<t.val().length&&t.val(t.val().substr(0,4))}),i("#tableContractor thead tr th").each(function(a){var t,e="tableContractor-"+a,o=i(this).data("filter"),r=i(this).data("filter-name"),n=[],s=null;1==o&&(i(this).find("span").addClass("account__contractorDropdown"),i('#tableContractor tbody [data-filter-name="'+r+'"]').each(function(e){t=i(this).text().trim(),n[t]=t}),0<Object.keys(n).length&&(s='<ul id="'+e+'" class="account__contractor-sortable">',s+='<li class="active" data-type="clear">All</li>',Object.entries(n).forEach(function(e){e=_slicedToArray(e,2),e[0],e=e[1];s+='<li data-type="text">'+e+"</li>"}),s+="</ul>",i(this).append(s)),i(document).on("click","#"+e+" > li",function(e){var t;i(this).parent().find(".active").removeClass("active"),i(this).addClass("active"),l.column(a).search()!==this.value&&(t="clear"==i(this).data("type")?"":i(this).text(),l.column(a).search(t).draw()),i(".account__contractorDropdown, .account__contractor-sortable").removeClass("active")}))});var l=i("#tableContractor").DataTable({ordering:!1,orderCellsTop:!1,fixedHeader:!0,searching:!0,select:!1,language:{zeroRecords:"No matched records found"},fnDrawCallback:function(){1<i("#tableContractor_paginate span a").length?i("#tableContractor_paginate").removeClass("empty"):i("#tableContractor_paginate").addClass("empty")}});i(document).on("click",".account__contractorDropdown",function(e){i(this).hasClass("active")?(i(this).removeClass("active"),i(".account__contractor-sortable").removeClass("active")):(i(".account__contractorDropdown").removeClass("active"),i(".account__contractor-sortable").removeClass("active"),i(this).addClass("active"),i(this).parent().find(".account__contractor-sortable").addClass("active"))}),i(document).on("mouseup",function(e){var t=i(".account__contractor-sortable");0===t.has(e.target).length&&(t.removeClass("active"),i(".account__contractorDropdown").removeClass("active"))}),i('[data-toggle="tooltip"]').hover(function(){var e=i(this).attr("title"),t=i(this).offset(),a=t.top-i(window).scrollTop(),o=t.left-i(window).scrollLeft();i(this).parent().append(i('<div class="tooltip" style="opacity: 0"></div>').html(e)).ready(function(){i(".tooltip").css({left:o-i(".tooltip").outerWidth(!0)/2+20,top:a-i(".tooltip").outerHeight(!0)-2,opacity:1})})},function(){setTimeout(function(){i(document).find(".tooltip").remove()},200)}),i(document).on("click",".changePin",function(e){var t;e.preventDefault(),i(this).hasClass("disabled")||((t=i(this)).addClass("disabled"),i.ajax({beforeSend:function(e){t.block(loader_default)},data:{action:"profile_change_pin",type:"open"},dataType:"json",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},complete:function(){t.removeClass("disabled"),t.unblock()},success:function(e){"OK"===e.status?(i.fancybox.close(),i.fancybox.open({type:"html",src:e.html})):"ERROR"===e.status&&alert("An error occurred:"+e.message)},url:ajax_profile_object.ajaxurl}))}),i(document).on("submit",".formChangePin",function(e){var t,a;i(this).hasClass("disabled")||(a=(t=i(this)).serialize(),t.addClass("disabled"),i.ajax({beforeSend:function(e){t.block(loader)},data:a,dataType:"json",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},complete:function(){t.removeClass("disabled"),t.unblock()},success:function(e){if("OK"===e.status){if(1==e.reload)return i(".form__message").html(e.message),location.reload(),!1;i.fancybox.close(),i.fancybox.open({type:"html",src:e.html})}else"ERROR"===e.status&&0!=e.validation&&(i(".form__message").html(e.message),i.each(e.validation,function(e,t){var a=i(t),t=a.offset().top-i(".pageHeader").outerHeight(!0)-50;a.length&&(a.addClass("form__input-error"),i("body,html").animate({scrollTop:t},400))}))},url:ajax_profile_object.ajaxurl})),e.preventDefault()}),i(document).on("submit",".formAuth",function(e){var t,a;i(this).hasClass("disabled")||(a=(t=i(this)).serialize(),t.addClass("disabled"),i.ajax({beforeSend:function(e){t.block(loader),t.find(".form__input-error").removeClass("form__input-error")},data:a,dataType:"json",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},complete:function(){t.removeClass("disabled"),t.unblock()},success:function(e){if(i(".form__message").html(e.message),t.find(".form__input-error").removeClass("form__input-error"),"ERROR"===e.status&&0!=e.validation&&i.each(e.validation,function(e,t){var a=i(t),t=a.offset().top-i(".pageHeader").outerHeight(!0)-50;a.length&&(a.addClass("form__input-error"),i("body,html").animate({scrollTop:t},400))}),"OK"===e.status&&1==e.reload)return setTimeout(function(){i("#main").addClass("account__preloader")},400),i(".form__message").html(e.message),window.location.href=e.url,!1},url:ajax_profile_object.ajaxurl})),e.preventDefault()}),i(document).on("submit",".formProfile",function(e){var t,a;i(this).hasClass("disabled")||(a=(t=i(this)).serialize(),t.addClass("disabled"),i.ajax({beforeSend:function(e){t.block(loader)},data:a,dataType:"json",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},complete:function(){t.removeClass("disabled"),t.unblock()},success:function(e){i(".form__message").html(e.message)},url:ajax_profile_object.ajaxurl})),e.preventDefault()}),i(document).on("submit",".formReferal",function(e){var t,a;i(this).hasClass("disabled")||(a=(t=i(this)).serialize(),t.addClass("disabled"),i.ajax({beforeSend:function(e){t.block(loader)},data:a,dataType:"json",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},complete:function(){t.removeClass("disabled"),t.unblock()},success:function(e){if(console.log(e),i(".form__message").html(e.message),"ERROR"===e.status&&0!=e.validation&&i.each(e.validation,function(e,t){var a=i(t),t=a.offset().top-i(".pageHeader").outerHeight(!0)-50;a.length&&(a.addClass("form__input-error"),i("body,html").animate({scrollTop:t},400))}),"OK"===e.status&&1==e.reload)return setTimeout(function(){i("#main").addClass("account__preloader")},400),window.location.href=e.url,!1},url:ajax_profile_object.ajaxurl})),e.preventDefault()}),i(document).on("change",".formReferalCheckbox",function(e){i(this).val(this.checked?"TRUE":"FALSE")}),i(document).on("submit",".formForgotPin",function(e){var t,a;i(this).hasClass("disabled")||(a=(t=i(this)).serialize(),t.addClass("disabled"),i.ajax({beforeSend:function(e){t.block(loader),t.find(".form__input-error").removeClass("form__input-error")},data:a,dataType:"json",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},complete:function(){t.removeClass("disabled"),t.unblock()},success:function(e){i(".form__message").html(e.message),t.find(".form__input-error").removeClass("form__input-error"),"ERROR"===e.status&&0!=e.validation&&i.each(e.validation,function(e,t){var a=i(t),t=a.offset().top-i(".pageHeader").outerHeight(!0)-50;a.length&&(a.addClass("form__input-error"),i("body,html").animate({scrollTop:t},400))}),"OK"===e.status&&i(".formForgotPin").html(e.html)},url:ajax_profile_object.ajaxurl})),e.preventDefault()}),i(document).on("submit",".formLostPassword",function(e){var t,a;i(this).hasClass("disabled")||(a=(t=i(this)).serialize(),t.addClass("disabled"),i.ajax({beforeSend:function(e){t.block(loader),t.find(".form__input-error").removeClass("form__input-error")},data:a,dataType:"json",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},complete:function(){t.removeClass("disabled"),t.unblock()},success:function(e){if(i(".form__message").html(e.message),t.find(".form__input-error").removeClass("form__input-error"),"ERROR"===e.status&&0!=e.validation&&i.each(e.validation,function(e,t){var a=i(t),t=a.offset().top-i(".pageHeader").outerHeight(!0)-50;a.length&&(a.addClass("form__input-error"),i("body,html").animate({scrollTop:t},400))}),"OK"===e.status&&1==e.reload)return window.location.href=e.url,!1},url:ajax_profile_object.ajaxurl})),e.preventDefault()})});