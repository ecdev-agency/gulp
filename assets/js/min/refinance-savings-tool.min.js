"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}jQuery(function(d){var u={scenario_compare_max:3,scenario_compare:[],init:function(){this.install=this.install(this),this.range_sliders=this.range_sliders(this),this.print=this.print(this),d(window).on("resize orientationchange",this.range_sliders),d(document).on("change",'.rstTabs [type="radio"]',this.tabs),d(document).on("change",".rstTableCheckbox",this.compare),d(document).on("click",".attentionClose",this.attention),d(document).on("click",".rstRemoveScenario",this.remove_scenario),d(document).on("click",".rstItemScenario",this.add_scenario),d(document).on("click",".rstClearScenario",this.clear_scenario),d(document).on("click",".rstItemScenarioItem",this.scenario_item),d(document).on("click",".rstSubmit",this.submit),d(document).on("submit",".rstForm",this.submit),d(document).on("click",".btn-print",this.print_modal)},install:function(){var e;jQuery(document).mousedown(function(e){var t=d(".modal-popover"),a=d('[data-toggle="modal-popover"]');t.is(e.target)||0!==t.has(e.target).length||(a.removeClass("open"),t.fadeOut(100))}),d(document).on("change","input.currency",function(e,t){1==d(this).val().length&&0==d(this).val()&&d(this).val(0),void 0!==t?formatCurrency2(d(this),!1):formatCurrency2(d(this),!0)}),d(document).on("keyup","input.currency",function(e,t){return 9!==e.keyCode&&void formatCurrency2(d(this),!0)}),d(document).on("keypress","input.currency",function(e,t){e=e.which||e.keyCode;if(String.fromCharCode(e).match(/[^0-9]/g))return!1}),d("input.currency").trigger("change"),d(document).on("change","input.percentage",function(e,t){void 0!==t&&"down_payment_amt"==t?formatPercent(d(this),e,!1):formatPercent(d(this),e,!0)}),d(document).on("keypress","input.percentage",function(e,t){e=e.which||e.keyCode;if(String.fromCharCode(e).match(/[^0-9.]/g))return!1}),d(document).on("keyup","input.percentage",function(e,t){return 9!==e.keyCode&&void formatPercent(d(this),e,!0)}),d("input.percentage").trigger("change"),d(document).on("change keyup","input.currency-report",function(e,t){1==d(this).val().length&&0==d(this).val()&&d(this).val(0),d(this).val(formatNumber(d(this).val().replace(",","")))}),d("input.currency-report").trigger("change"),d(document).on("change",".rst2andCheckbox",function(){var e=d(".rst2andGroup");this.checked?e.removeClass("hidden"):e.addClass("hidden")}),d(document).on("click",'#parameters input[type="text"], #parameters input[type="number"], input.currency-report',function(e){d(this).select()}),d(document).on("keypress",'#parameters input[type="text"], #parameters input[type="number"], input.currency-report',function(e){"13"==(event.keyCode||event.which)&&e.preventDefault()}),d("#btnShare").length&&(e=document.getElementById("contentShare"),tippy("#btnShare",{trigger:"click",placement:"bottom-start",content:e.innerHTML,allowHTML:!0,interactiveDebounce:0,interactive:!0,interactiveBorder:0,appendTo:document.getElementById("main")})),d(document).on("click",".mortgage_report__shedule-table-info .close",function(e){d(this).parent().remove(),d(".mortgage_report__shedule-table tbody").css("padding-top","25px"),e.preventDefault()}),jQuery(document).on("click",'a[data-toggle="modal-popover"]',function(e){if(e.preventDefault(),!d(this).parents("#calc-content").hasClass("preload-values")){var t=d(this).attr("href"),a=d(".modal-popover .data-list"),e=jQuery(t).find(".filter-input");if("block"==d(t).css("display"))return!1;d(this).addClass("open"),jQuery(t).fadeIn(200),jQuery(t).find(".filter-input").val(""),"default"!=rqt_vars._rqt_type?(a.attr("data-selected-city",rqt_vars._rqt_city),a.html(rqt_get_ziplist_by_city(rqt_vars._rqt_city)),e.attr("placeholder",rqt_vars._config_default_location_city_search_placeholder)):(a.html(default_cities_list),e.attr("placeholder",rqt_vars._config_default_location_search_placeholder)),(e=d(".modal-popover .data-list")).scrollTop(0),e.niceScroll({cursorcolor:"rgba(100, 100, 100,.2)",autohidemode:!1,bouncescroll:!0,cursorwidth:"4px",cursorborder:"4px",grabcursorenabled:!1,horizrailenabled:!1,touchbehavior:!0,preventmultitouchscrolling:!1,cursordragontouch:!0,railpadding:{top:0,right:2,left:0,bottom:0}})}})},range_sliders:function(){991<window.innerWidth&&d(".value-slider").each(function(){var e=parseFloat(d(this).attr("data-min")),t=parseFloat(d(this).attr("data-max")),a=(parseFloat(d(this).attr("data-step")),parseFloat(d(this).attr("data-value"))),n=d(this);d(this).slider({range:"min",min:e,max:t,value:a,slide:function(e,t){d(this).parents("label").find("[data-slider-target]").val(t.value).trigger("keyup").trigger("change"),d(this).find(".ui-slider-handle").text("")},create:function(e,t){var a=setInterval(function(){n.find(".ui-slider-handle").text("").attr("tabindex","-1"),clearInterval(a)},20);d(".current_payment").trigger("click")}})});var e=d(".range-plan"),t=Number(e.data("min")),a=Number(e.data("max")),n=Number(e.data("value")),r=document.getElementById("rstPlanValue");e.slider({range:"min",min:t,max:a,value:n,slide:function(e,t){var a=Math.floor(t.value/12),n=t.value%12;r.innerHTML=t.value,t.value<13?r.innerHTML+=1==t.value?" month":" months":(r.innerHTML+=" (",0<a&&(r.innerHTML+=a+(1==a?" year":" years")),0<n&&(r.innerHTML+=", "+n+(1==n?" month":" months")),r.innerHTML+=")")},create:function(e,t){}})},tabs:function(e){var t=d(this).data("tab"),a=d(".rstTabsContent");a.find(".tab.active").removeClass("active"),a.find('[data-tab-content="'+t+'"]').addClass("active"),e.preventDefault()},compare:function(e){var n,r,t=d(this),a=t.parent().parent().parent(),o=t.data("id"),i=d('[data-tab-label="'+o+'"]'),c=t.data("row-id"),s=i.text();if(t.prop("checked")?(a.addClass("active"),u.scenario_compare.push(1)):(a.removeClass("active"),u.scenario_compare.shift()),u.scenario_compare.length>u.scenario_compare_max)return t.prop("checked",!1),a.removeClass("active"),u.scenario_compare.shift(),d(".attention").addClass("active"),!1;t.prop("checked")?(t={"%row%":c,"%title%":s,"%loan_type%":d('[data-scenario-loan-type="'+o+'"]').val(),"%loan_amount%":d('[data-scenario-loan-ammount="'+o+'"]').val(),"%rate%":t.data("value-rate"),"%apr%":t.data("value-apr"),"%closing_cost%":t.data("value-costs"),"%points%":t.data("value-points"),"%scenario%":o},t=u.template_scenario(t),r=n=0,d(".rstItemScenario").each(function(e,t){var a=d(this);0===a.find(".rstItemScenarioItem").length&&0===r&&(r=1,n=a.data("scenario"))}),d('[data-scenario="'+n+'"]').append(t),d('[data-scenario="'+n+'"]').find(".title strong").text(Number(n+1))):d(".rest_calc__scenario").find('a[data-row="'+c+'"]').parent().parent().remove();var l=[];d('[data-tab-table="'+o+'"] [data-row]').each(function(e,t){!0===d(this).find('[type="checkbox"]').prop("checked")&&l.push(e)}),l.length?i.addClass("active"):i.removeClass("active"),e.preventDefault()},attention:function(e){d(".attention").removeClass("active"),e.preventDefault()},remove_scenario:function(e){e.stopPropagation();var t=d(this),a=t.data("row"),n=d(".rstTabsContent").find('input[data-row-id="'+a+'"]'),a=t.parent().parent().data("scenario-id");t.parent().parent().remove(),n.prop("checked",!1),n.parent().parent().parent().removeClass("active"),u.scenario_compare.shift();var r=[];d('[data-tab-table="'+a+'"] [data-row]').each(function(e,t){!0===d(this).find('[type="checkbox"]').prop("checked")&&r.push(e)}),0===r.length&&d('.rstTabs [data-tab-label="'+a+'"]').removeClass("active"),e.preventDefault()},add_scenario:function(e){var t=d("#rst_scenario_tabs").offset().top-d("#header").outerHeight(!0)-60;d("body, html").animate({scrollTop:t},500),e.preventDefault()},clear_scenario:function(e){u.scenario_compare=[],d(".rstItemScenario").each(function(e,t){var a=d(this),n=a.find(".rstRemoveScenario").data("row"),n=d(".rstTabsContent").find('[data-row-id="'+n+'"]');n.prop("checked",!1),n.parent().parent().parent().removeClass("active"),d(".rstTabs").find(".active").removeClass("active"),a.find(".rest_calc__scenario-row-col-select").remove()}),e.preventDefault()},scenario_item:function(e){e.stopPropagation()},submit:function(e,t){void 0===t&&e.preventDefault(),"submit"===e.type?u.get_rates():"click"===e.type&&d(".rstForm").trigger("submit","return")},get_rates:function(e){d(".rest_calc__table").addClass("loading"),setTimeout(function(){d(".rest_calc__table").removeClass("loading")},1e3)},template_scenario:function(e){var a,n=d(".rstScenarioTpl").html(),r=0;return d.each(e,function(e,t){a=(0===r?n:a).replace(e,t),r++}),a},print:function(){d(document).on("click",".rstPrint",function(e){d(".print_modal__content").printThis({importCSS:!0}),e.preventDefault()})},print_modal:function(){var t=d(".rest_calc__table");d.ajax({beforeSend:function(e){t.addClass("loading")},data:{action:"fancybox_print"},dataType:"json",method:"POST",complete:function(){t.removeClass("loading")},success:function(e){1==e.success&&(d.fancybox.close(),d.fancybox.open({type:"html",src:e.data.html,opts:(_defineProperty(e={loop:!1,toolbar:!1,infobar:!1},"toolbar",!1),_defineProperty(e,"hash",null),_defineProperty(e,"slideShow",!1),_defineProperty(e,"modal",!1),_defineProperty(e,"arrows",!1),_defineProperty(e,"touch",!1),_defineProperty(e,"baseTpl",'<div class="fancybox-container print" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-stage"></div></div></div>'),_defineProperty(e,"afterShow",function(e,t){}),e)}))},url:sm_obj.ajaxurl})}};u.init()});