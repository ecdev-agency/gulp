"use strict";var $rqt_form=$("#parametersForm"),$rqt_form_values={};function get_form_values(){$rqt_form_values={down_payment_amt:1e5,down_payment_pct:20,credit_score:760,loan_amount:4e5,loan_purpose:0,loan_purpose_trigger:0,third_parties_check:"",loan_type:"30 year fixed",lock_days:30,military_veteran:"N",occupancy:0,property_type:0,purchase_price:5e5,second_mortgage_amt:"",waive_escrow:0,zip_code:98004},$rqt_form.serializeArray().reduce(function(e,t){var a=t.value;return-1==a.toLowerCase().indexOf("$")&&-1==a.toLowerCase().indexOf("%")||(a=cleanNum(t.value)),$rqt_form_values[t.name]=a,e},{})}function update_form_values(){$.each($rqt_form_values,function(e,t){void 0!==$("[name="+e+"]")&&0<$("[name="+e+"]").length&&$("[name="+e+"]").val(t)})}function update_view(){$rqt_form=$("#parametersForm"),get_form_values();var e,t=$rqt_form.find(".down_payment_amt").parents("label").find(".value-slider"),a=$rqt_form.find(".purchase_price_lbl");0==$rqt_form_values.loan_purpose?(e=$rqt_form.find("#first_time_buyer"),5<$rqt_form_values.down_payment_pct?(e.parents(".extra-options").addClass("hidden"),e.removeAttr("checked"),e.prop("checked",!1)):e.parents(".extra-options").removeClass("hidden"),e=$rqt_form.find("#lpmi_check"),20<=$rqt_form_values.down_payment_pct?(e.parents(".extra-options").addClass("hidden"),e.prop("checked",!1),e.removeAttr("checked")):e.parents(".extra-options").removeClass("hidden"),$rqt_form.find("input.field-group:disabled, input.field-group.disabled").parents(".fields-group").removeClass("disabled"),$rqt_form.find(".down_payment_amt, .down_payment_pct").removeAttr("disabled"),t.show(),a.find("span").text("Purchase Price")):($rqt_form.find(".down_payment_amt, .down_payment_pct").prop("disabled",!0),$rqt_form.find("input.field-group:disabled, input.field-group.disabled").parents(".fields-group").addClass("disabled"),t.hide(),a.find("span").text("Property Value"))}function init_ZIPmodal_popup(){var e=$(".modal-popover .data-list");e.scrollTop(0),e.niceScroll({cursorcolor:"rgba(100, 100, 100,.2)",autohidemode:!1,bouncescroll:!0,cursorwidth:"4px",cursorborder:"4px",grabcursorenabled:!1,horizrailenabled:!1,touchbehavior:!0,preventmultitouchscrolling:!1,cursordragontouch:!0,railpadding:{top:0,right:2,left:0,bottom:0}})}function after_change_city_popup(){$("#parameters").hasClass("not-open")&&$("#parametersForm").submit()}function before_submit(e,t){animate_rates_scroll()}$(document).on("change","input.extra-options",function(){return $("#parametersForm").submit()}),$(document).ready(function(){function t(){var e=$(".add-options-col"),t=$(".add-options-btn"),a=$(".form-fields-container");e.hasClass("show")?(e.attr("data-show",!0),t.attr("data-show",!0),a.attr("show-add-options",!0)):(e.attr("data-show",!1),t.attr("data-show",!1),a.attr("show-add-options",!1))}$(document).on("keypress","input.onlyNumbers",function(e){e=e.which||e.keyCode;if(String.fromCharCode(e).match(/[^0-9]/g))return!1}),$(document).on("keypress","input.currency",function(e,t){e=e.which||e.keyCode;if(String.fromCharCode(e).match(/[^0-9]/g))return!1}),$(document).on("keyup","input.currency",function(e,t){if(9===e.keyCode)return!1;formatCurrency2($(this),!0);e=void 0!==$(this).parents("label").find(".value-slider.ui-slider")&&null!=$(this).parents("label").find(".value-slider.ui-slider")?$(this).parents("label").find(".value-slider.ui-slider"):null;e&&e.slider("value",cleanNum($(this).val())),$(this).hasClass("loan_amount")&&(n=($rqt_form_values.purchase_price-cleanNum($(this).val()))/($rqt_form_values.purchase_price/100),$rqt_form.find(".down_payment_pct").val(n).trigger("change","loan_amount")),update_view();var a,r,n=$rqt_form_values.down_payment_amt;$(this).hasClass("purchase_price")&&(n=removeCurrencyDots($rqt_form_values.purchase_price*($rqt_form_values.down_payment_pct/100)),a=removeCurrencyDots($rqt_form_values.purchase_price/100*rqt_vars._rqt_conditions.DownPaymentPct.max),$rqt_form.find(".down_payment_amt").val(n).attr("max",a).trigger("change","purchase_price")),$(this).hasClass("down_payment_amt")&&(r=$rqt_form_values.down_payment_amt/($rqt_form_values.purchase_price/100),$rqt_form.find(".down_payment_pct").val(r).trigger("change","down_payment_amt")),($(this).hasClass("purchase_price")||$(this).hasClass("down_payment_pct")||$(this).hasClass("down_payment_amt"))&&(a=$rqt_form_values.purchase_price,r=$rqt_form_values.purchase_price/100*(100-rqt_vars._rqt_conditions.DownPaymentPct.max),$rqt_form.find(".loan_amount").attr("min",r.toFixed(0)).attr("max",a.toFixed(0)),$rqt_form.find(".loan_amount").val($rqt_form_values.purchase_price-n).trigger("change","any"))}),$(document).on("change","input.currency",function(e,t){1==$(this).val().length&&0==$(this).val()&&$(this).val(""),void 0!==t?formatCurrency2($(this),!1):formatCurrency2($(this),!0);var a=void 0!==$(this).parents("label").find(".value-slider.ui-slider")&&null!=$(this).parents("label").find(".value-slider.ui-slider")?$(this).parents("label").find(".value-slider.ui-slider"):null;a&&a.slider("value",cleanNum($(this).parents("label").find("[data-slider-target]").val()));var r,n=void 0!==$(this).parents("label[for=loan_amount]").find(".value-slider.ui-slider")&&null!=$(this).parents('label[for="loan_amount"]').find(".value-slider.ui-slider")?$(this).parents('label[for="loan_amount"]').find(".value-slider.ui-slider"):null;n&&(r=n.parents("label").find("input[data-slider-target]"),t=parseFloat(r.attr("max")),a=parseFloat(r.attr("min")),void 0!==r.val()&&cleanNum(r.val()),n.attr("data-min",a),n.attr("data-max",t),init_range_slider(n))}),$(document).on("keypress","input.percentage",function(e,t){e=e.which||e.keyCode;if(String.fromCharCode(e).match(/[^0-9.]/g))return!1}),$(document).on("keyup","input.percentage",function(e,t){if(9===e.keyCode)return!1;formatPercent($(this),e,!0),$(this).hasClass("down_payment_pct")&&(a=removeCurrencyDots($rqt_form_values.purchase_price/100*$rqt_form_values.down_payment_pct),$rqt_form.find(".down_payment_amt").val(a).trigger("change","down_payment_pct")),update_view();var a=void 0!==$(this).parents("label").find(".value-slider.ui-slider")&&null!=$(this).parents("label").find(".value-slider.ui-slider")?$(this).parents("label").find(".value-slider.ui-slider"):null;a&&a.slider("value",$rqt_form_values.down_payment_pct),void 0!==t&&"loan_amount"!=t&&($(this).hasClass("purchase_price")||$(this).hasClass("down_payment_pct")||$(this).hasClass("down_payment_amt"))&&$rqt_form.find(".loan_amount").val($rqt_form_values.purchase_price-$rqt_form_values.down_payment_amt).trigger("change","any")}),$(document).on("change","input.percentage",function(e,t){void 0!==t&&"down_payment_amt"==t?formatPercent($(this),e,!1):formatPercent($(this),e,!0),update_view(),void 0!==t&&"loan_amount"==t&&(a=removeCurrencyDots($rqt_form_values.purchase_price/100*$rqt_form_values.down_payment_pct),$rqt_form.find(".down_payment_amt").val(a).trigger("change","down_payment_pct"));var a=void 0!==$(this).parents("label").find(".value-slider.ui-slider")&&null!=$(this).parents("label").find(".value-slider.ui-slider")?$(this).parents("label").find(".value-slider.ui-slider"):null;a&&a.slider("value",$rqt_form_values.down_payment_pct)}),$(document).on("click","#parameters .zip_code, #parameters input.currency, #parameters input.percentage",function(){$(this).select()}),$(document).on("click","#fee_worksheet .print-btn",function(e){$("#rqt_popup_content").printThis({importCSS:!0})}),jQuery(document).mousedown(function(e){var t=$(".modal-popover"),a=$('[data-toggle="modal-popover"]');t.is(e.target)||0!==t.has(e.target).length||(a.removeClass("open"),t.fadeOut(100))}),jQuery(document).on("click",'a[data-toggle="modal-popover"]',function(e){if(e.preventDefault(),!$(this).parents("#calc-content").hasClass("preload-values")){var t=$(this).attr("href"),a=$(".modal-popover .data-list"),e=jQuery(t).find(".filter-input");if("block"==$(t).css("display"))return!1;$(this).addClass("open"),jQuery(t).fadeIn(200),jQuery(t).find(".filter-input").val(""),a.empty(),"default"!=rqt_vars._rqt_type?(a.attr("data-selected-city",rqt_vars._rqt_city),a.html(rqt_get_ziplist_by_city(rqt_vars._rqt_city)),e.attr("placeholder",rqt_vars._config_default_location_city_search_placeholder)):(a.html(default_cities_list),e.attr("placeholder",rqt_vars._config_default_location_search_placeholder)),init_ZIPmodal_popup()}}),jQuery(document).on("click",".modal-popover .data-list a",function(e){e.preventDefault();var a,t=$('a[href="#'+$(this).parents(".modal-popover").attr("id")+'"]'),r=$(this).parents("li").attr("data-zip"),n=$(this).parents("li").attr("data-city"),o=$(this).parents("li").attr("data-state"),e=$(this).parents("li").attr("data-county");void 0!==$(this).parents("li").attr("data-childs")&&"true"==$(this).parents("li").attr("data-childs")?($(".modal-popover .filter-input").val(n),$(".modal-popover .data-list").empty(),(a=cities.zip[n]).list.map(function(e,t){e='<li data-type="zip"  data-county="'+a.info.county+'" data-state="'+a.info.state+'" data-city="'+n+'" data-zip="'+e+'"><a href="#">'+e+"</a></li>";$(".modal-popover .data-list").append(e)})):(e=n+" "+o+" ("+e.toUpperCase()+")",t.find("#cityState").text(e),$("#parameters #zip_code").val(r),$(this).parents(".modal-popover").fadeOut(100,function(){t.removeClass("open"),after_change_city_popup()})),init_ZIPmodal_popup()}),$(document).on("click",".add-options-btn",function(){var e=$(".add-options-col");e.toggleClass("show"),e.hasClass("show")?createCookie("QRT_add_open",1,30):delCookie("QRT_add_open"),t()}),t(),$(document).on("change click","[name=loan_purpose_trigger]",function(e){$("#loan_purpose").val($(this).val()).trigger("keyup"),update_view()})});