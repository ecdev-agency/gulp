"use strict";function init_range_sliders(){991<window.innerWidth&&$(".value-slider").each(function(){var t=parseFloat($(this).attr("data-min")),e=parseFloat($(this).attr("data-max")),n=(parseFloat($(this).attr("data-step")),parseFloat($(this).attr("data-value"))),a=$(this);$(this).slider({range:"min",min:t,max:e,value:n,slide:function(t,e){$(this).parents("label").find("[data-slider-target]").val(e.value).trigger("keyup").trigger("change"),$(this).find(".ui-slider-handle").text("")},create:function(t,e){var n=setInterval(function(){a.find(".ui-slider-handle").text("").attr("tabindex","-1"),clearInterval(n)},20)}})})}jQuery(document).ready(function(g){var e={},m={},o="",n={},a=0,t=0,r=new Date(Date.now()+36e5),i=page_vars.taxRatesByState,l=g("#hp-interest-rate"),p=g("#i-interest-rate"),c=g("#mp-interest-rate"),s=g("#bw-interest-rate");location.search.substr(1).split("&").forEach(function(t){e[t.split("=")[0]]=t.split("=")[1]}),e.hasOwnProperty("zip_code")?(g("input[name=zipcode]").val(e.zip_code),b(e.zip_code)):sm_get_user_geolocation(),g(".mortgage-calculator__calculator .date_ch").click(function(){g(".mortgage-calculator__calculator .date-values").slideToggle(300),"1"===g("#i-date-type").val()?(g(".date-values").html("/ month").data("type","12"),g("#change_income").html("Annual Income")):(g(".date-values").html("/ year").data("type","1"),g("#change_income").html("Monthly Income"))}),g(".mortgage-calculator__calculator .date-values").click(function(){g("#i-date-type").val(g(this).data("type")).trigger("change"),g(".mortgage-calculator__calculator .date_ch span").html(g(this).html())}),g("input").on("click",function(){g(this).select()});var h=g("#aff_Range"),d=(h.attr("max"),h.attr("min")),u=h.val();w(u);var y=g("#i-debt-to-income");y.val();function w(t){var e;t<33&&(e=3.125*t,g("#aff-line-active").css("width",e+"%"),g("#mod-line-active").css("width",0),g("#name-line-active").css("width",0),g("#unaff-line-active").css("width",0),g("#range-monthly-payment span.range_part").html("Affordable"),g("#custom-handle").css("background-color","#009821")),32<t&&t<44&&(e=100/11*(t-32),g("#aff-line-active").css("width","100%"),g("#mod-line-active").css("width",e+"%"),g("#name-line-active").css("width",0),g("#unaff-line-active").css("width",0),g("#range-monthly-payment span.range_part").html("Moderate"),g("#custom-handle").css("background-color","#ffec43")),43<t&&t<51&&(e=12.5*(t-43),g("#aff-line-active").css("width","100%"),g("#mod-line-active").css("width","100%"),g("#name-line-active").css("width",e+"%"),g("#unaff-line-active").css("width",0),g("#range-monthly-payment span.range_part").html("High"),g("#custom-handle").css("background-color","#ffd166")),50<t&&(e=2*(t-50),g("#aff-line-active").css("width","100%"),g("#mod-line-active").css("width","100%"),g("#name-line-active").css("width","100%"),g("#unaff-line-active").css("width",e+"%"),g("#range-monthly-payment span.range_part").html("Unaffordable"),g("#custom-handle").css("background-color","#ea5b0b"))}y.val(u),h.on("change input",function(){y.val(g(this).val()),g("#i-debt-to-income").trigger("change"),w(g(this).val())});var v=g("#custom-handle");g("#slider").slider({min:1,max:99,values:[36],create:function(){v.html('<span id="range-monthly-payment"><span class="price"></span><span class="range_part"></span></span>')},slide:function(t,e){g("#aff_Range").val(e.values[0]),y.val(e.values[0]),g("#i-debt-to-income").trigger("change"),w(e.values[0])}}),g(".show_more_options").on("click",function(t){t.preventDefault(),g(this).toggleClass("active"),g(this).closest("form").find(".more_options_place").slideToggle(300);g(this).closest("form").attr("id")}),g("#tabs_hp .m_calc_out_tab").on("click",function(){if(g(this).hasClass("active"))return!1;g("#tabs_hp .m_calc_out_tab.active").removeClass("active"),g("#tabs_hp .m_calc_out_content.active").removeClass("active");var t=g(this).data("id");g(this).addClass("active"),g("#m_calc_out_tab-"+t).addClass("active")}),g("#tabs_mp .m_calc_out_tab").on("click",function(){if(g(this).hasClass("active"))return!1;g("#tabs_mp .m_calc_out_tab.active").removeClass("active"),g("#tabs_mp .m_calc_out_content.active").removeClass("active");var t=g(this).data("id");g(this).addClass("active"),g("#m_calc_out_tab-"+t).addClass("active"),g(".tables_slider").slick("refresh")});function b(t){var e,e="",n=getCookie("geolocation");if(n)try{if(!(n=JSON.parse(n)).hasOwnProperty("country")||!n.hasOwnProperty("zip_code")||!n.hasOwnProperty("state_code"))throw"geolocation error"}catch(t){n=!1}void 0===n||0==n||n.zip_code!=t?(g("input[name=zipcode]").val(t),g("#auto_geolocation").val(t),g("#loc_name").html("").addClass("hold"),jQuery.post(sm_obj.ajaxurl,{action:"arrloc",zip_code:t,size:!0},function(t){t?t.hasOwnProperty("city")&&t.hasOwnProperty("county_name")&&(e=t.city+" "+t.statecode+" ("+t.county_name+")",g("#i-state").val(t.statecode).trigger("change"),g("#mp-state").val(t.statecode).trigger("change"),g("#bw-state").val(t.statecode).trigger("change"),g("#hp-state").val(t.statecode).trigger("change"),t={zip_code:t.zip_code,state_code:t.statecode,state:t.state,city:t.city,county_name:t.county_name,country:"US"},setCookie("geolocation",JSON.stringify(t),{expires:r}),g("input[name=zipcode]").val(t.zip_code),g("#auto_geolocation").val(t.state),g(document).trigger("geolocation_received",t)):e="not found",g("#loc_name").html(e).removeClass("hold")})):(g("input[name=zipcode]").val(n.zip_code),g("#auto_geolocation").val(n.state_code),t=n.state_code,e=n.city+" "+t+" ("+n.county_name+")",g("#loc_name").html(e),g("#i-state").val(t).trigger("change"),g("#mp-state").val(t).trigger("change"),g("#bw-state").val(t).trigger("change"),g("#hp-state").val(t).trigger("change"))}function f(t){var e="";0<t.length?(e="<ul>",t.forEach(function(t){e+='<li data-zip="'+t.zip_code+'" data-st="'+t.statecode+'" data-sn="'+t.state+'"  data-cn="'+t.county_name+'" data-city="'+t.city+'">'+t.city+" <strong>"+t.statecode+" ("+t.county_name+")</strong></li>"}),e+="</ul>"):e="<p>Not found</p>",g("#city-search-list").html(""),g("#city-search-list").append(e)}function P(t){switch(t){case"by-home-price":g("#by-home-price").addClass("active"),g("#by-income").removeClass("active"),g("#by-monthly-payment").removeClass("active"),g("#bi-weekly-payment").removeClass("active"),g(".by-home-price-item").show(),g(".by-income-item").hide(),g(".by-monthly-payment-item").hide(),g(".bi-weekly-payment-item").hide(),g("body").removeClass("bw-chart-tooltip"),W("by-home-price"),m.hp.calculated||j();break;case"by-income":g("#by-home-price").removeClass("active"),g("#by-income").addClass("active"),g("#by-monthly-payment").removeClass("active"),g("#bi-weekly-payment").removeClass("active"),g(".by-home-price-item").hide(),g(".by-income-item").show(),g(".by-monthly-payment-item").hide(),g(".bi-weekly-payment-item").hide(),g("body").removeClass("bw-chart-tooltip"),W("by-income"),m.i.calculated||E(),g("#i-debt-to-income").trigger("change");break;case"by-monthly-payment":g("#by-home-price").removeClass("active"),g("#by-income").removeClass("active"),g("#bi-weekly-payment").removeClass("active"),g("#by-monthly-payment").addClass("active"),g(".by-home-price-item").hide(),g(".by-income-item").hide(),g(".by-monthly-payment-item").show(),g(".bi-weekly-payment-item").hide(),g("body").removeClass("bw-chart-tooltip"),W("by-monthly-payment"),m.mp.calculated||Y();break;case"bi-weekly-payment":g("#by-home-price").removeClass("active"),g("#by-income").removeClass("active"),g("#by-monthly-payment").removeClass("active"),g("#bi-weekly-payment").addClass("active"),g("body").addClass("bw-chart-tooltip"),g(".by-home-price-item").hide(),g(".by-income-item").hide(),g(".by-monthly-payment-item").hide(),g(".bi-weekly-payment-item").show(),W("bi-weekly-payment"),m.bw.calculated||D()}}function _(t){return i.hasOwnProperty(t)?Number(i[t]):0}function x(t,e,n,a,o,r){return((Math.pow(e+1,n)-1)*t+(o*Math.pow(e+1,n)-o)*r+o*e*Math.pow(e+1,n))/((Math.pow(e+1,n)-1)*a+(Math.pow(e+1,n)-1)*r+e*Math.pow(e+1,n))}function T(t,e,n,a,o,r){return(Math.pow(e+1,n)-1)*t/((Math.pow(e+1,n)-1)*a+((1-o)*Math.pow(e+1,n)+o-1)*r+(1-o)*e*Math.pow(e+1,n))}function A(t){return t<.05?.013:t<.1?.0068:t<.15?.0051:t<.2?.0036:0}function I(t,e,n){return t*n*Math.pow(1+t,e)/(Math.pow(1+t,e)-1)}function C(t){return Number(t.replace(/[^0-9\.]+/g,""))}function M(t){return"$"+parseFloat(t).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function k(t){return t=parseFloat(t).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,""),parseInt(t)}function R(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function S(t,e){var n;return null==e&&(e=3),R(t)?(n=parseInt(t),n+="%"):(n=parseFloat(parseFloat(t).toFixed(e)),n=(n+="%").replace(",","."))}function F(t,e){var n;return null==e&&(e=3),n=R(t)?(n=parseInt(t),parseFloat(n.toFixed(3))+"%"):(n=parseFloat(parseFloat(t).toFixed(e))+"%").replace(",",".")}function L(t){return parseInt(t)}function B(t){var e=parseInt(m[t].loanTermInMonth/12);return m[t].interestRate=m[t].userState&&page_vars.mortgageRatesByState.hasOwnProperty(m[t].userState)?Number(page_vars.mortgageRatesByState[m[t].userState]["Fixed"+e+"Year"].rate):0,"hp"===t?l.val(S(m[t].interestRate)):"i"===t?(p.val(S(m[t].interestRate)),l.val(S(m.hp.interestRate))):"mp"===t?c.val(S(m[t].interestRate)):"bw"===t&&s.val(S(m[t].interestRate)),m[t].interestRate}function O(t,e){var n=parseInt(jQuery(".estimate_year").data("year"));g("#"+e+" b").html(n+t)}function z(t){new Array;for(var e,n=C(g("#hp-down-payment-amount").val()),a=C(g("#hp-loan-amount").val()),o=C(g("#hp-property-tax").val()),r=C(g("#hp-home-insurance").val()),n=a-n,i=parseFloat(g("#hp-loanTermInMonths").val()),l=C(g("#hp-interest-rate").val())/1200,p=l*n*Math.pow(1+l,i)/(Math.pow(1+l,i)-1),c=(C(g("#hp-hoa").val()),0),s=0,h=n,m=[n],d=[0],u=[0],y=1;y<=i;y++)c+=e=h*l,s+=e=p-e,h-=e,y%12==0&&(m.push(Math.round(Math.abs(h))),d.push(Math.round(s)),u.push(Math.round(c)));r=!1;g(window).width()<991&&(r=!1);var w,v=g.map(Array.from(Array(t.loanTermInMonth/12+1)),function(t,e){return e}),n={datasets:[{label:"Principal Remaining",data:m,borderColor:"#24AB4C",backgroundColor:"",fill:!1,borderWidth:1,pointRadius:2,pointStyle:"circle",pointHitRadius:15,pointHoverBackgroundColor:"#24AB4C",pointHoverBorderColor:"#24AB4C",pointHoverBorderWidth:2,pointHoverRadius:3,pointRotation:20,usePointStyle:!0},{label:"Interest Paid",data:u,borderColor:"#8874fa",backgroundColor:"rgba(241,234,254,.5)",borderWidth:1,pointStyle:"circle",pointRadius:2,pointHitRadius:15,pointHoverBackgroundColor:"#8874fa",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:1,pointHoverRadius:3,pointRotation:20},{label:"Principal Paid",data:d,borderColor:"#4064E4",backgroundColor:"rgba(242,251,255,.5)",borderWidth:1,pointStyle:"circle",pointRadius:2,pointHitRadius:15,pointHoverBackgroundColor:"#4064E4",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:1,pointHoverRadius:3,pointRotation:20}],labels:v};t.hpChart?(t.hpChart.data=n,t.hpChart.update()):(Chart.defaults.LineWithLine=Chart.defaults.line,Chart.controllers.LineWithLine=Chart.controllers.line.extend({draw:function(t){var e,n,a;Chart.controllers.line.prototype.draw.call(this,t),this.chart.tooltip._active&&this.chart.tooltip._active.length&&(a=this.chart.tooltip._active[0],e=this.chart.ctx,n=a.tooltipPosition().x,t=this.chart.scales["y-axis-0"].top,a=this.chart.scales["y-axis-0"].bottom,e.save(),e.beginPath(),e.moveTo(n,t),e.lineTo(n,a),e.lineWidth=1,e.strokeStyle="#8B8B8B",e.stroke(),e.restore())}}),Chart.defaults.global.pointHitDetectionRadius=1,w=900<g(window).width(),t.hpChart=new Chart(g("#hp-chart"),{type:"LineWithLine",data:n,options:{responsive:!0,usePointStyle:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Chart.js LineWithLine"}},tooltips:{enabled:!1,mode:"index",position:"nearest",custom:function(a){var o,t,e,n,r,i=document.getElementById("chartjs-tooltip1");i||((i=document.createElement("div")).id="chartjs-tooltip1",i.innerHTML="<table class='table_tooltip'></table>",(w?document.body:document.getElementById("m_calc_out_tab-02")).appendChild(i)),0===a.opacity&&w?i.style.opacity=0:(i.classList.remove("above","below","no-transform"),a.yAlign?i.classList.add(a.yAlign):i.classList.add("no-transform"),a.body&&(n=a.title||[],r=a.body.map(function(t){return t.lines}),o="<thead>",n.forEach(function(t){o+="<tr><th>"+t+"</th></tr>"}),o+="</thead><tbody>",r.forEach(function(t,e){var n=a.labelColors[e],e="background:"+n.backgroundColor;e+="; border-color:"+n.borderColor,o+="<tr><td>"+('<span class="chartjs-tooltip-key" style="'+(e+="; border-width: 2px")+'"></span>')+t+"</td></tr>"}),o+="</tbody>",i.querySelector("table").innerHTML=o),t=this._chart.canvas.getBoundingClientRect(),i.style.opacity=1,e=g("#hp-chart").offset().top,n=g("#hp-chart").height()/2,r=g(i).width(),i.style.left=t.left+a.caretX-(r+15)+"px",r=g(i).height(),a.caretY>n?i.style.top=e+a.caretY-r+"px":i.style.top=e+a.caretY+"px",i.style.padding=a.yPadding+"px "+a.xPadding+"px")},backgroundColor:"#ffffff",titleFontColor:"#000000",bodyFontColor:"#000000",titleFont:{style:"bold",size:"36"},bodySpacing:4,caretPadding:8,titleMarginBottom:13,padding:100,cornerRadius:4,usePointStyle:!0,callbacks:{title:function(t){return"Year "+t[0].index},label:function(t,e){var n=e.datasets[t.datasetIndex].label+": ";return n+="<b>$ "+Math.round(t.yLabel).toLocaleString("en")+"</b>"}}},legend:{display:r,position:"bottom",labels:{boxWidth:0,boxHeight:0,padding:30,fontSize:16,pointStyle:"circle",fontColor:"#000000",usePointStyle:"true",color:"rgb(255, 99, 132)"}},scales:{xAxes:[{scaleLabel:{labelString:"Length of Loan (loan)"},gridLines:{drawOnChartArea:!1,borderDashOffset:3},ticks:{maxRotation:0,callback:function(t,e){if(g(window).width()<767&&20<v.length){if(e%3==0)return t}else if(e%2!=0)return t},beginAtZero:!0}}],yAxes:[{gridLines:{drawOnChartArea:!1},position:"right",ticks:{callback:function(t){return"  $"+(999<t?t/1e3+"k":t)},beginAtZero:!0}}]}}}))}g("input[name=zipcode]").on("change",function(){var t=g(this).val().replace(/[^0-9\.]+/g,"");g(this).val(t);t=g(this).val();5==t.length?(b(t),g(this).removeClass("warning")):g(this).addClass("warning")}),g("body").on("click","#city-search-list li",function(){var t="",e=g(this).data("st");g(this).data("zip")&&(g("input[name=zipcode]").val(g(this).data("zip")),g("#auto_geolocation").val(o),t=g(this).data("city")+" "+e+" ("+g(this).data("cn")+")",g("#loc_name").html(t).toggleClass("active"),t={zip_code:g(this).data("zip"),state_code:g(this).data("st"),state:g(this).data("sn"),city:g(this).data("city"),county_name:g(this).data("cn"),country:"US"},setCookie("geolocation",JSON.stringify(t),{expires:r}),g(document).trigger("geolocation_received",t)),g(".mortgage-calculator-city-search").slideToggle(300)}),g(".city-search_field").click(function(){g(this).addClass("active")}),g(".city-search_field .input_clean").on("click",function(){g(this).parent().find("input").val(""),g(".mortgage-calculator-city-search").slideToggle(300),g("#loc_name").removeClass("active"),g("#city-search-list").html(g("#city-const-list").html())}),g("#loc_name").on("click",function(){g(this).toggleClass("active"),g(".mortgage-calculator-city-search").slideToggle(0).find("input").focus()}),g("#city-search_field").on("input",function(){var e;g(this).val().length<2||(g("#city-search-list").html("Search.."),g("#city-search-list ul").remove(),e={action:"arrloc",size:"search",search:g(this).val()},a&&(a.abort(),clearTimeout(t)),n.hasOwnProperty(e.search)?f(n[e.search]):t=setTimeout(function(){a=g.ajax({url:sm_obj.ajaxurl,data:e,type:"POST"}).done(function(t){f(t),n[e.search]=t,a=0})},100))}),g(".mortgage-calculator__tabs .mortgage-calculator__tab").on("click",function(t){t.preventDefault(),P(g(this).attr("id"))});var $=g(".tables_slider");function H(t){0<g("#table_monthly_content").html().length&&($.slick("unslick"),g("#table_monthly_content").html(""));var e=t.interestRate/1200,n=0,a=t.loanAmount-t.downPayment,o=0,r=0,i="",l="",p="",c=0,s=0,h=0,m=0;p+='<div class="outer"><div class="inner"><div class="mortgage_report__shedule-table-info"><p>Use a finger to move the table</p><a href="#close" class="close"><svg width="20" height="20" viewBox="0 0 20 20" fill="none"xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#F7F7FB"/><path d="M14 6L6 14" stroke="#7991B6" stroke-width="1.5"/><path d="M6 6L14 14" stroke="#7991B6" stroke-width="1.5"/></svg></a></div><table class="amortization-table"><thead><tr><th>Year</th><th>Principal and Interest</th><th>Principal</th><th>Interest</th><th>Principal Remaining</th><th>Total Interest</th></tr></thead><tbody>';for(var d,u,y,w=1;w<=t.loanTermInMonth;w++){var v,m=t.principalAndInterest;if(w%12==1&&(v='<div class="item"><div class="outer"><div class="inner"><div class="mortgage_report__shedule-table-info"><p>Use a finger to move the table</p><a href="#close" class="close"><svg width="20" height="20" viewBox="0 0 20 20" fill="none"xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#F7F7FB"/><path d="M14 6L6 14" stroke="#7991B6" stroke-width="1.5"/><path d="M6 6L14 14" stroke="#7991B6" stroke-width="1.5"/></svg></a></div><table class="amortization-table"><thead><tr><th>Month</th><th>Principal and Interest</th><th>Principal</th><th>Interest</th><th>Principal Remaining</th><th>Total Interest</th></tr></thead><tbody id ="cur_year_'+ ++o+'">',g("#table_monthly_content").append(v+"</tbody></table></div></div></div>")),d=w-12*(o-1),u=y=u=void 0,u=new Date,new Object,y=u.getMonth(),u=0,i={text:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][u=12<=d+y?y+d-12:y+d],month:u},v=i.month,y=o,u=d=void 0,d=new Date,u=d.getFullYear(),l=v<=d.getMonth()?u+y:u+y-1,u=a*e,0<t.epToYourMonthlyPayment&&(m=Math.min(a+u,m+t.epToYourMonthlyPayment)),0<t.epAsAnExtraYearlyPayment&&i.month==t.epOccurringEvery-1&&(m=Math.min(a+u,m+t.epAsAnExtraYearlyPayment)),n+=u,y=(m=0<t.epAsOneTimePaymentIn&&i.month==t.epAsOneTimePaymentMonth-1&&l==+t.epAsOneTimePaymentYear?Math.min(a+u,m+t.epAsOneTimePaymentIn):m)-u,a=Math.max(0,a-y),c+=m,s+=y,h+=u,g("#table_monthly_content").find("#cur_year_"+o).append("<tr><td>"+i.text+" "+l+"</td><td>"+M(m)+"</td><td>"+M(y)+"</td><td>"+M(u)+"</td><td>"+M(a)+"</td><td>"+M(n)+"</td></tr>"),w%12!=0&&0!=a||(p+="<tr><td>"+ ++r+"</td><td>"+M(c)+"</td><td>"+M(s)+"</td><td>"+M(h)+"</td><td>"+M(a)+"</td><td>"+M(n)+"</td></tr>",h=s=c=0),0==a)break}function b(){var t=g("li.slick-active button").html(),e=g(".slick-dots li:last button").html();g("#cur_slide_num").html(t),t==e?g(".cust_slick_nav .next").addClass("not_active"):g(".cust_slick_nav .next").removeClass("not_active"),"1"==t?g(".cust_slick_nav .prev").addClass("not_active"):g(".cust_slick_nav .prev").removeClass("not_active")}g("#cur_slide_count").html(r+" Year"),p+="</tbody></table></div></div>",g("#annual-content").html(p),g(".cust_slick_nav .next").click(function(t){t.preventDefault(),g(".slick-next.slick-arrow").trigger("click"),b()}),g(".cust_slick_nav .prev").click(function(t){t.preventDefault(),g(".slick-prev.slick-arrow").trigger("click"),b()}),$.slick({dots:!0,infinite:!1,speed:500,slidesToShow:1,adaptiveHeight:!0,touchMove:!1,swipe:!1}),g("#cur_slide_num").html("1")}function j(t){if(!U()){void 0!==m.hp.customRate&&0!=m.hp.customRate||B("hp");var e,n,a=m.hp.interestRate/1200,o=m.hp.homeInsurance/12,r=0,i=0;if("percent"==m.hp.downPaymentType)r=m.hp.downPaymentPercent/100,m.hp.downPayment=r*m.hp.loanAmount,e=(i=m.hp.loanAmount-m.hp.downPayment)*A(m.hp.downPayment/m.hp.loanAmount)/12,n=I(a,m.hp.loanTermInMonth,i);else{for(;e=(i=m.hp.loanAmount-m.hp.downPayment)*A(m.hp.downPayment/m.hp.loanAmount)/12,r=m.hp.downPayment/m.hp.loanAmount,n=I(a,m.hp.loanTermInMonth,i),e<A(r););.99<r&&(m.hp.downPaymentType="percent",m.hp.downPayment=m.hp.loanAmount*(r=.99),e=(i=m.hp.loanAmount-m.hp.downPayment)*A(m.hp.downPayment/m.hp.loanAmount)/12,n=I(a,m.hp.loanTermInMonth,i))}m.hp.monthlyPayment=e+m.hp.propertyTax+o+n+m.hp.hoa,m.hp.downPaymentPercent=100*r,g("#hp-down-payment-amount").val(M(m.hp.downPayment)),g("#hp-down-payment-percent").val(S(m.hp.downPaymentPercent,2)),g("#pb-principal_and_interest").html(M(n)),g("#pb-private_mortgage_insurance").html(M(e)),g("#pb-property_tax").html(M(m.hp.propertyTax)),g("#pb-homeowners_insurance").val(L(o)),g("#pb-hoa_other").val(L(m.hp.hoa));var l=k(n),p=k(e),c=k(m.hp.propertyTax),s=k(o),h=k(m.hp.hoa),o=l+p+c+s+h;g("#hp-mortgage-calculator-title").html(M(o)),g("#line-pb-principal_and_interest .line b").css("width",parseInt(l/o*100)+"%"),g("#line-pb-private_mortgage_insurance .line b").css("width",parseInt(p/o*100)+"%"),g("#line-pb-property_tax .line b").css("width",parseInt(c/o*100)+"%"),g("#line-pb-homeowners_insurance .line b").css("width",parseInt(s/o*100)+"%"),g("#line-pb-hoa_other .line b").css("width",parseInt(h/o*100)+"%"),O(m.hp.loanTermInMonth/12,"hp-est"),m.hp.calculated=!0,(m.hp.calculated_first_time=!1)!==t&&z(m.hp)}}function E(){var t,e,n,a,o,r,i,l;Z()||(void 0!==m.i.customRate&&0!=m.i.customRate||B("i"),t=m.i.homeInsurance/12,e=m.i.income*m.i.data_type/12*(m.i.debtToIncome/100)-m.i.monthlyDebts-m.i.hoa-t,o=m.i.interestRate/1200,a=m.i.propertyTaxPercent/1200,i=A(r=m.i.downPaymentPercent/100),l=r*(n=T(e,o,m.i.loanTermInMonth,a,r,i/12)),m.i.propertyTax=n*a,a=m.i.propertyTax,r=I(o,m.i.loanTermInMonth,o=n*(1-r)),i=o*i/12,m.i.propertyTaxCurrency=a,m.i.loanAmount=n,m.i.monthlyPayment=e,m.i.downPayment=l,l=i+a+t+r+m.i.hoa,g("#i-output-home-price").html(M(m.i.loanAmount)),g("#i-down-payment-amount").attr("max",parseInt(.99*m.i.loanAmount)),g("#i-monthly-debts").attr("max",parseInt(l)),g("#i-output-home-price_input").val(M(m.i.loanAmount)),g("#i-output-monthly-payment").html(M(l)),g("#range-monthly-payment span.price").html(M(l)+"/mo"),g("#affpb-principal_and_interest").html(M(r)),g("#affpb-private_mortgage_insurance").html(M(i)),g("#affpb-property_tax").html(M(a)),g("#affpb-homeowners_insurance").val(L(t)),g("#affpb-hoa_other").val(L(m.i.hoa)),g("#l-aff-pb-principal_and_interest .line b").css("width",parseInt(r/l*100)+"%"),g("#l-aff-pb-property_tax .line b").css("width",parseInt(a/l*100)+"%"),g("#l-aff-pb-private_mortgage_insurance .line b").css("width",parseInt(i/l*100)+"%"),g("#l-aff-pb-homeowners_insurance .line b").css("width",parseInt(t/l*100)+"%"),g("#l-aff-pb-hoa_other .line b").css("width",parseInt(m.i.hoa/l*100)+"%"),O(m.i.loanTermInMonth/12,"i-est"),m.i.calculated=!0)}function Y(t){if(!X()){void 0!==m.mp.customRate&&0!=m.mp.customRate||B("mp");var e,n=m.mp.homeInsurance/12,a=m.mp.monthlyPayment-m.mp.hoa-n,o=m.mp.interestRate/1200,r=m.mp.propertyTaxPercent/1200,i=0;if("percent"==m.mp.downPaymentType)e=A(i=m.mp.downPaymentPercent/100),m.mp.loanAmount=T(a,o,m.mp.loanTermInMonth,r,i,e/12),m.mp.downPayment=i*m.mp.loanAmount;else{for(;e=A(i),m.mp.loanAmount=x(a,o,m.mp.loanTermInMonth,r,m.mp.downPayment,e/12),e<A(i=m.mp.downPayment/m.mp.loanAmount););.99<i&&(m.mp.downPaymentType="percent",e=A(i=.99),m.mp.loanAmount=T(a,o,m.mp.loanTermInMonth,r,i,e/12))}var l=m.mp.loanAmount*r,p=m.mp.loanAmount*(1-i),c=p*e/12;m.mp.principalAndInterest=I(o,m.mp.loanTermInMonth,p),m.mp.downPaymentPercent=100*i;p=c+l+n+m.mp.principalAndInterest+m.mp.hoa;g("#mp-down-payment-amount").val(M(m.mp.downPayment)),g("#mp-down-payment-percent").val(S(m.mp.downPaymentPercent,2)),g("#mp-output-home-price").html(M(m.mp.loanAmount)),g("#mp-down-payment-amount").attr("max",parseInt(m.mp.loanAmount)),g("#mp-ot-monthly-payment").attr("max",parseInt(m.mp.loanAmount)),g("#mp-eyp-monthly-payment").attr("max",parseInt(m.mp.loanAmount/(m.mp.loanTermInMonth/12))),g("#mp-ty-monthly-payment").attr("max",parseInt(m.mp.loanAmount-m.mp.monthlyPayment)),g("#mp-output-monthly-payment").html("$"+M(p)),g("#bmppb-principal_and_interest").html(""+M(m.mp.principalAndInterest)),g("#bmppb-private_mortgage_insurance").html(""+M(c)),g("#bmppb-property_tax").html(M(l)),g("#bmppb-homeowners_insurance").val(L(n)),g("#bmppb-hoa_other").val(L(m.mp.hoa)),g("#l-bmp-pb-principal_and_interest .line b").css("width",parseInt(m.mp.principalAndInterest/p*100)+"%"),g("#l-bmp-pb-private_mortgage_insurance .line b").css("width",parseInt(c/p*100)+"%"),g("#l-bmp-pb-property_tax .line b").css("width",parseInt(l/p*100)+"%"),g("#l-bmp-pb-homeowners_insurance .line b").css("width",parseInt(n/p*100)+"%"),g("#l-bmp-pb-hoa_other .line b").css("width",parseInt(m.mp.hoa/p*100)+"%"),!(m.mp.calculated=!0)!==t&&H(m.mp)}}function D(t){var e,n,a,o,r,l,i=0;if("percent"==m.bw.downPaymentType)i=m.bw.downPaymentPercent,m.bw.downPayment=m.bw.loanAmount/100*i;else{for(i=m.bw.downPayment/m.bw.loanAmount;(m.bw.loanAmount-m.bw.downPayment)*A(m.bw.downPayment/m.bw.loanAmount)/12<A(i););.99<i&&(m.bw.downPaymentType="percent",m.bw.downPayment=m.bw.loanAmount*(i=.99)),i*=100}m.bw.downPaymentPercent=i,g("#bw-down-payment-amount").val(M(m.bw.downPayment)),g("#bw-down-payment-percent").val(S(m.bw.downPaymentPercent,2)),!1!==t&&(e=!1,g(window).width()<991&&(e=!1),void 0!==m.bw.customRate&&0!=m.bw.customRate||B("bw"),a=m.bw.interestRate/1200,r=m.bw.loanAmount-m.bw.downPayment,n=I(a,m.bw.loanTermInMonth,r),t=m.bw.homeInsurance/12,a=r*A(m.bw.downPayment/m.bw.loanAmount)/12,r=function(){new Array;var t,e,n,a=C(g("#bw-down-payment-amount").val()),o=C(g("#bw-loan-amount").val()),o=(C(g("#bw-property-tax").val()),C(g("#bw-home-insurance").val()),o-a),r=g("#bw-loanTermInMonths").val(),a=g("#bw-loanTermInMonths").val()/12,i=C(g("#bw-interest-rate").val())/1200,l=i*o*Math.pow(1+i,r)/(Math.pow(1+i,r)-1),p=(C(g("#bw-hoa").val()),0),c=0,s=0,h=o,m=o,d=[o],u=[o];if(0<i)for(t=1;t<=r;t++)c+=n=h*i,h-=n=l-n,t%12==0&&d.push(Math.round(h));var y=l/2,w=C(g("#bw-interest-rate").val())/36525*14,v=(parseInt(365.25/14),Math.ceil(365.25*a/14));if(0<w)for(var b=1;b<=v;b++){if(s+=e=m*w,e=y-e,m=Math.max(0,m-e),u.push(Math.round(m)),m<=0)break;p=b}o=(14*p/365.25).toFixed(1),g("#biweekly_interest_saving").html(M(c-s)),g("#bw-output-home-price").html(M(c-s)),g("#monthly_monthly_payment").html(M(l)),g("#biweekly_monthly_payment").html(M(l/2)),g("#biweekly_total_interest").html(M(s)),g("#monthly_total_interest").html(M(c)),g("#biweekly_term").html(o+" years"),g("#monthly_term").html(M(a)+" years");var f=[];return u.forEach(function(t,e){e%26==0&&f.push(t)}),f.push(0),[d,f]}(),o=g.map(Array.from(Array(m.bw.loanTermInMonth/12+1)),function(t,e){return e}),r={datasets:[{label:"Biweekly payments",data:r[1],borderColor:"#4064E4",backgroundColor:"#F0F3FF",borderWidth:1,pointStyle:"circle",pointRadius:2,pointHitRadius:15,pointHoverBackgroundColor:"#4064E4",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:1,pointHoverRadius:3,pointRotation:20},{label:"Monthly payments",data:r[0],borderColor:"#673AB7",backgroundColor:"rgb(103, 58, 183, 0.5)",fill:!1,borderWidth:1,pointRadius:2,pointStyle:"circle",pointHitRadius:15,pointHoverBackgroundColor:"#673AB7",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:2,pointHoverRadius:3,pointRotation:20,usePointStyle:!0}],labels:o},m.bw.monthlyPayment=a+m.bw.propertyTax+t+n+m.bw.hoa,m.bw.hpChart?(m.bw.hpChart.data=r,m.bw.hpChart.update()):(Chart.defaults.LineWithLine=Chart.defaults.line,Chart.controllers.LineWithLine=Chart.controllers.line.extend({draw:function(t){var e,n,a;Chart.controllers.line.prototype.draw.call(this,t),this.chart.tooltip._active&&this.chart.tooltip._active.length&&(a=this.chart.tooltip._active[0],e=this.chart.ctx,n=a.tooltipPosition().x,t=this.chart.scales["y-axis-0"].top,a=this.chart.scales["y-axis-0"].bottom,e.save(),e.beginPath(),e.moveTo(n,t),e.lineTo(n,a),e.lineWidth=1,e.strokeStyle="#8B8B8B",e.stroke(),e.restore())}}),Chart.defaults.global.pointHitDetectionRadius=1,l=900<g(window).width(),m.bw.hpChart=new Chart(g("#bw-chart"),{type:"LineWithLine",data:r,options:{responsive:!0,usePointStyle:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Chart.js LineWithLine"}},tooltips:{enabled:!1,mode:"index",position:"nearest",custom:function(a){var o,t,e,n,r,i=document.getElementById("chartjs-tooltip");i||((i=document.createElement("div")).id="chartjs-tooltip",i.innerHTML="<table class='table_tooltip'></table>",(l?document.body:document.getElementById("m_calc_out_tab-04")).appendChild(i)),0===a.opacity&&l?i.style.opacity=0:(i.classList.remove("above","below","no-transform"),a.yAlign?i.classList.add(a.yAlign):i.classList.add("no-transform"),a.body&&(n=a.title||[],r=a.body.map(function(t){return t.lines}),o="<thead>",n.forEach(function(t){o+="<tr><th>"+t+"</th></tr>"}),o+="</thead><tbody>",r.forEach(function(t,e){var n=a.labelColors[e],e="background:"+n.backgroundColor;e+="; border-color:"+n.borderColor,o+="<tr><td>"+('<span class="chartjs-tooltip-key" style="'+(e+="; border-width: 2px")+'"></span>')+t+"</td></tr>"}),o+="</tbody>",i.querySelector("table").innerHTML=o),t=this._chart.canvas.getBoundingClientRect(),i.style.opacity=1,e=g("#bw-chart").offset().top,n=g("#bw-chart").height()/2,r=g(i).width(),i.style.left=t.left+a.caretX-(r+15)+"px",r=g(i).height(),a.caretY>n?i.style.top=e+a.caretY-r+"px":i.style.top=e+a.caretY+"px",i.style.padding=a.yPadding+"px "+a.xPadding+"px")},backgroundColor:"#ffffff",titleFontColor:"#000000",bodyFontColor:"#000000",titleFont:{style:"bold",size:"36"},bodySpacing:4,caretPadding:8,titleMarginBottom:13,padding:100,cornerRadius:4,usePointStyle:!0,callbacks:{title:function(t){return"Year "+t[0].index},label:function(t,e){var n=e.datasets[t.datasetIndex].label+": ";return n+="<b>$ "+Math.round(t.yLabel).toLocaleString("en")+"</b>"}}},legend:{display:e,position:"bottom",usePointStyle:"true",labels:{boxWidth:0,boxHeight:0,padding:30,fontSize:16,pointStyle:"circle",fontColor:"#000000",usePointStyle:"true",color:"rgb(255, 99, 132)"}},scales:{xAxes:[{scaleLabel:{labelString:"Length of Loan (loan)"},gridLines:{drawOnChartArea:!1,borderDashOffset:3},ticks:{maxRotation:0,callback:function(t,e){if(g(window).width()<767&&20<o.length){if(e%3==0)return t}else if(e%2!=0)return t},beginAtZero:!0}}],yAxes:[{gridLines:{drawOnChartArea:!1},ticks:{callback:function(t){return"$"+(999<t?t/1e3+"k":t)},beginAtZero:!0}}]}}})),m.bw.calculated=!0)}g(".table_tabs_item").click(function(t){t.preventDefault(),g(this).hasClass("active")||(g(".table_tabs_item.active").removeClass("active"),g(".table_content > div.active").removeClass("active"),g(this).addClass("active"),g(".table_content #"+g(this).data("tab")).addClass("active"),g(".tables_slider").slick("refresh"))}),g("#hp-loanTermInMonths").on("change",function(t){t.preventDefault();t=g(this).val();m.hp.loanTermInMonth=t,j(),O(t/12,"hp-est")}),g("#i-loanTermInMonths").on("change",function(t){t.preventDefault();t=g(this).val();m.i.loanTermInMonth=t,E(),O(t/12,"i-est")}),g("#mp-loanTermInMonths").on("change",function(t){t.preventDefault();t=g(this).val();m.mp.loanTermInMonth=t,Y(),O(t/12,"mp-est")}),g("#bw-loanTermInMonths").on("change",function(t){t.preventDefault();t=g(this).val();m.bw.loanTermInMonth=t,D()}),g("#hp-loan-amount").on("change",function(){return!U()&&(m.hp.loanAmount=C(g(this).val()),J(g(this)),g(this).val(M(m.hp.loanAmount)),g("#hp-down-payment-amount").attr("max",.99*m.hp.loanAmount),m.hp.downPayment=m.hp.loanAmount*m.hp.downPaymentPercent/100,m.hp.downPayment>m.hp.loanAmount&&(m.hp.downPayment=m.hp.loanAmount,m.hp.downPaymentPercent=99,g("#hp-down-payment-percent").val(S(m.hp.downPaymentPercent))),g("#hp-down-payment-amount").val(M(m.hp.downPayment)),m.hp.propertyTaxManual?m.hp.propertyTax=m.hp.loanAmount*m.hp.propertyTaxPercent/1200:(m.hp.propertyTaxPercent=_(m.hp.userState),m.hp.propertyTax=m.hp.loanAmount*_(m.hp.userState)/1200,g("#hp-property-tax").val(S(m.hp.propertyTaxPercent))),g("#pb-property-tax").val(S(m.hp.propertyTax)),void j())}),g("#hp-down-payment-amount").on("change",function(){if(U())return!1;m.hp.downPaymentType="amount",m.hp.downPayment=C(g(this).val()),g(this).val(M(m.hp.downPayment));for(var t,e,n,a=m.hp.interestRate/1200,o=m.hp.homeInsurance/12,r=0;e=(t=m.hp.loanAmount-m.hp.downPayment)*A(m.hp.downPayment/m.hp.loanAmount)/12,r=m.hp.downPayment/m.hp.loanAmount,n=I(a,m.hp.loanTermInMonth,t),e<A(r););m.hp.downPaymentPercent=parseFloat(m.hp.downPayment/m.hp.loanAmount*100).toFixed(3),m.hp.monthlyPayment=e+m.hp.propertyTax+o+n+m.hp.hoa,m.hp.downPaymentPercent=100*r,g("#hp-down-payment-amount").val(M(m.hp.downPayment)),g("#hp-down-payment-percent").val(S(m.hp.downPaymentPercent,2)).trigger("change"),j()}),g("#hp-down-payment-percent").on("change",function(){if(U())return!1;m.hp.downPaymentType="percent",m.hp.downPaymentPercent=C(g(this).val()),99<m.hp.downPaymentPercent&&(m.hp.downPaymentPercent=99),g(this).closest(".field").find(".ui-slider-range").css("width",m.hp.downPaymentPercent+"%"),g(this).closest(".field").find(".ui-slider-handle").css("left",m.hp.downPaymentPercent+"%");var t,e,n,a=m.hp.interestRate/1200,o=m.hp.homeInsurance/12;g(this).val(S(m.hp.downPaymentPercent)),t=m.hp.downPaymentPercent/100,m.hp.downPayment=t*m.hp.loanAmount,e=(n=m.hp.loanAmount-m.hp.downPayment)*A(m.hp.downPayment/m.hp.loanAmount)/12,n=I(a,m.hp.loanTermInMonth,n),m.hp.monthlyPayment=e+m.hp.propertyTax+o+n+m.hp.hoa,m.hp.downPaymentPercent=100*t,m.hp.downPayment=m.hp.downPaymentPercent*m.hp.loanAmount/100,g("#hp-down-payment-amount").val(M(m.hp.downPayment)),g("#hp-down-payment-percent").val(S(m.hp.downPaymentPercent,2)),j()}),g("#hp-state").on("change",function(){m.hp.userState=g(this).val(),m.hp.propertyTaxManual=!1,m.hp.propertyTaxPercent=_(m.hp.userState),m.hp.propertyTax=m.hp.loanAmount*_(m.hp.userState)/1200,g("#hp-property-tax").val(S(m.hp.propertyTaxPercent)),g("#pb-property_tax").val(S(m.hp.propertyTax)),j()}),g("#hp-interest-rate").on("change",function(){return!U()&&(m.hp.interestRate=Math.max(Math.min(C(g(this).val()),100),.001),m.hp.customRate=!0,g(this).val(F(m.hp.interestRate)),void j())}),g("#hp-property-tax").on("change",function(){return!U()&&(m.hp.propertyTaxManual=!0,m.hp.propertyTaxPercent=C(g(this).val()),99<m.hp.propertyTaxPercent&&(m.hp.propertyTaxPercent=99),m.hp.propertyTax=m.hp.loanAmount*m.hp.propertyTaxPercent/1200,g(this).val(S(m.hp.propertyTaxPercent)),g("#pb-property_tax").val(S(m.hp.propertyTax)),void(m.hp.calculated_first_time||j()))}),g("#hp-home-insurance").on("change",function(){m.hp.homeInsurance=C(g(this).val()),g(this).val(M(m.hp.homeInsurance)),j()}),g("#hp-hoa").on("change",function(){m.hp.hoa=C(g(this).val()),g(this).val(M(m.hp.hoa)),j()}),g("#pb-homeowners_insurance").on("change",function(){m.hp.homeInsurance=12*C(g(this).val()),g("#hp-home-insurance").val(M(m.hp.homeInsurance)),j()}),g("#pb-hoa_other").on("change",function(){m.hp.hoa=C(g(this).val()),g("#hp-hoa").val(M(m.hp.hoa)),j()}),g("#affpb-homeowners_insurance").on("change",function(){m.i.homeInsurance=12*C(g(this).val()),g("#i-home-insurance").val(M(m.i.homeInsurance)),E()}),g("#affpb-hoa_other").on("change",function(){m.i.hoa=C(g(this).val()),g("#i-hoa").val(M(m.i.hoa)),E()}),g("#bmppb-homeowners_insurance").on("change",function(){m.mp.homeInsurance=12*C(g(this).val()),g("#mp-home-insurance").val(M(m.mp.homeInsurance)),Y()}),g("#bmppb-hoa_other").on("change",function(){m.mp.hoa=C(g(this).val()),g("#mp-hoa").val(M(m.mp.hoa)),Y()}),g("#hp-amortization-report").on("click contextmenu",function(t){t.preventDefault();t={hp:Math.round(m.hp.loanAmount),dp:Math.round(m.hp.downPayment),lt:m.hp.loanTermInMonth,tr:parseFloat((1200*m.hp.propertyTax/m.hp.loanAmount).toFixed(2)),yi:m.hp.homeInsurance,hoa:m.hp.hoa,ir:m.hp.interestRate},t=g(this).attr("href")+"?"+g.param(t);return window.open(t),!1}),g("#i-income").on("change",function(){return!Z()&&(m.i.income=C(g(this).val()),g(this).val(M(m.i.income)),void E())}),g("#i-date-type").on("change",function(){m.i.data_type=g(this).val(),E()}),g("#i-monthly-debts").on("change",function(){return!Z()&&(m.i.monthlyDebts=C(g(this).val()),g(this).val(M(m.i.monthlyDebts)),void E())}),g("#i-debt-to-income").on("change",function(){return!Z()&&(m.i.debtToIncome=C(g(this).val()),g(this).val(S(m.i.debtToIncome)),g("#aff_Range").val(S(m.i.debtToIncome)),w(m.i.debtToIncome),void E())}),g("#i-state").on("change",function(){m.i.userState=g(this).val(),m.i.propertyTaxPercent=_(m.i.userState),g("#i-property-tax").val(S(m.i.propertyTaxPercent)),E()}),g("#i-interest-rate").on("change",function(){return!Z()&&(m.i.interestRate=Math.max(Math.min(C(g(this).val()),100),.001),m.i.customRate=!0,g(this).val(F(m.i.interestRate)),void E())}),g("#i-down-payment-amount").on("change",function(){if(Z())return!1;m.i.downPayment=C(g(this).val()),g(this).val(M(m.i.downPayment));for(var t,e,n=m.i.propertyTaxPercent/1200,a=m.i.interestRate/1200,o=.2;t=A(o),e=x(m.i.monthlyPayment,a,m.i.loanTermInMonth,n,m.i.downPayment,t/12),t<A(o=m.i.downPayment/e););m.i.downPaymentPercent=parseFloat(100*o).toFixed(3),g("#i-down-payment-percent").val(S(m.i.downPaymentPercent)),E()}),g("#i-down-payment-percent").on("change",function(){if(Z())return!1;m.i.downPaymentPercent=C(g(this).val()),99<m.i.downPaymentPercent&&(m.i.downPaymentPercent=99),g(this).val(S(m.i.downPaymentPercent));var t=m.i.downPaymentPercent/100,e=m.i.propertyTaxPercent/1200,n=m.i.interestRate/1200,a=A(t),a=T(m.i.monthlyPayment,n,m.i.loanTermInMonth,e,t,a/12);m.i.downPayment=m.i.downPaymentPercent*a,g("#i-down-payment-amount").val(M(m.i.downPayment)),E()}),g("#i-property-tax").on("change",function(){return!Z()&&(m.i.propertyTaxPercent=C(g(this).val()),g(this).val(S(m.i.propertyTaxPercent)),void E())}),g("#i-home-insurance").on("change",function(){m.i.homeInsurance=C(g(this).val()),g(this).val(M(m.i.homeInsurance)),E()}),g("#i-hoa").on("change",function(){m.i.hoa=C(g(this).val()),g(this).val(M(m.i.hoa)),E()}),g("#i-amortization-report").on("click",function(t){t.preventDefault();t={hp:Math.round(m.i.loanAmount),dp:Math.round(m.i.downPayment),lt:m.i.loanTermInMonth,tr:m.i.propertyTaxPercent,yi:m.i.homeInsurance,hoa:m.i.hoa,ir:m.i.interestRate},t=g(this).attr("href")+"?"+g.param(t);return window.open(t),!1}),g(".added_extra_pay a.open_fields").on("click",function(t){t.preventDefault(),g(this).toggleClass("active"),g(this).hasClass("active")?g(this).find("b").text(page_vars.add_extra_payment_title[1]):g(this).find("b").text(page_vars.add_extra_payment_title[0]),g(".added_extra_pay_fields").slideToggle()}),g("#mp-monthly-payment").on("change",function(){return!X()&&(m.mp.monthlyPayment=C(g(this).val()),J(g(this)),g(this).val(M(m.mp.monthlyPayment)),void Y())}),g("#mp-down-payment-amount").on("change",function(){if(X())return!1;J(g(this)),m.mp.downPaymentType="amount",m.mp.downPayment=C(g(this).val()),g(this).val(M(m.mp.downPayment));for(var t,e,n=m.mp.monthlyPayment-m.mp.hoa-m.mp.homeInsurance/12,a=m.mp.propertyTax/1200,o=m.mp.interestRate/1200,r=.2;t=A(r),e=x(n,o,m.mp.loanTermInMonth,a,m.mp.downPayment,t/12),t<A(r=m.mp.downPayment/e););m.mp.downPaymentPercent=parseFloat(100*r).toFixed(3),g("#mp-down-payment-percent").val(S(m.mp.downPaymentPercent)).trigger("change"),Y()}),g("#mp-down-payment-percent").on("change",function(){if(X())return!1;m.mp.downPaymentType="percent",m.mp.downPaymentPercent=C(g(this).val()),99<m.mp.downPaymentPercent&&(m.mp.downPaymentPercent=99),g(this).closest(".field").find(".ui-slider-range").css("width",m.mp.downPaymentPercent+"%"),g(this).closest(".field").find(".ui-slider-handle").css("left",m.mp.downPaymentPercent+"%"),g(this).val(S(m.mp.downPaymentPercent));var t=m.mp.downPaymentPercent/100,e=m.mp.propertyTax/1200,n=m.mp.monthlyPayment-m.mp.hoa-m.mp.homeInsurance/12,a=m.mp.interestRate/1200,o=A(t),o=T(n,a,m.mp.loanTermInMonth,e,t,o/12);m.mp.downPayment=m.mp.downPaymentPercent*o,g("#mp-down-payment-amount").val(M(m.mp.downPayment)),Y()}),g("#mp-state").on("change",function(){m.mp.userState=g(this).val(),m.mp.propertyTax=_(m.mp.userState),g("#mp-property-tax").val(S(m.mp.propertyTaxPercent)),Y()}),g("#mp-interest-rate").on("change",function(){return!X()&&(m.mp.interestRate=Math.max(Math.min(C(g(this).val()),100),.001),m.mp.customRate=!0,g(this).val(F(m.mp.interestRate)),void Y())}),g("#mp-property-tax").on("change",function(){return!X()&&(m.mp.propertyTaxPercent=C(g(this).val()),g(this).val(S(m.mp.propertyTaxPercent)),void Y())}),g("#mp-home-insurance").on("change",function(){m.mp.homeInsurance=C(g(this).val()),g(this).val(M(m.mp.homeInsurance)),Y()}),g("#mp-hoa").on("change",function(){m.mp.hoa=C(g(this).val()),g(this).val(M(m.mp.hoa)),Y()}),g("#mp-amortization-report").on("click",function(t){t.preventDefault();t={hp:m.mp.loanAmount,dp:m.mp.downPayment,lt:m.mp.loanTermInMonth,tr:m.mp.propertyTax,yi:m.mp.homeInsurance,hoa:m.mp.hoa,ir:m.mp.interestRate,et:m.mp.epApply,tymp:m.mp.epToYourMonthlyPayment,aeyp:m.mp.epAsAnExtraYearlyPayment,oe:m.mp.epOccurringEvery,aotpi:m.mp.epAsOneTimePaymentIn,aotpm:m.mp.epAsOneTimePaymentMonth,aotpy:m.mp.epAsOneTimePaymentYear},t=g(this).attr("href")+"?q="+btoa(JSON.stringify(t));return window.open(t),!1}),g("#bw-loan-amount").on("change",function(){if(G())return!1;J(g(this)),m.bw.loanAmount=C(g(this).val()),g(this).val(M(m.bw.loanAmount)),g("#bw-down-payment-amount").attr("max",.99*m.bw.loanAmount);m.bw.interestRate;var t=0;if("percent"==m.bw.downPaymentType)t=m.bw.downPaymentPercent,m.bw.downPayment=m.bw.loanAmount/t;else{for(;(m.bw.loanAmount-m.bw.downPayment)*A(m.bw.downPayment/m.bw.loanAmount)/12<A(t=m.bw.downPayment/m.bw.loanAmount*100););.99<t&&(m.bw.downPaymentType="percent",m.bw.downPayment=m.bw.loanAmount*(t=.99))}g("#bw-down-payment-amount").val(M(m.bw.downPayment)),g("#bw-down-payment-percent").val(S(m.bw.downPaymentPercent,2)),m.bw.propertyTaxManual||(m.bw.propertyTax=m.bw.loanAmount*_(m.bw.userState)/1200,g("#bw-property-tax").val(M(m.bw.propertyTax))),D()}),g("#bw-down-payment-amount").on("change",function(){if(G())return!1;m.bw.downPaymentType="amount",m.bw.downPayment=C(g(this).val());m.bw.interestRate;for(var t=0;(m.bw.loanAmount-m.bw.downPayment)*A(m.bw.downPayment/m.bw.loanAmount)/12<A(t=m.bw.downPayment/m.bw.loanAmount*100););m.bw.downPaymentPercent=t,g(this).val(M(m.bw.downPayment)),g("#bw-down-payment-percent").val(S(m.bw.downPaymentPercent,2)).trigger("change"),D()}),g("#bw-down-payment-percent").on("change",function(){if(G())return!1;m.bw.downPaymentType="percent",m.bw.downPaymentPercent=C(g(this).val());var t;100<m.bw.downPaymentPercent&&(m.bw.downPaymentPercent=99),g(this).closest(".field").find(".ui-slider-range").css("width",m.bw.downPaymentPercent+"%"),g(this).closest(".field").find(".ui-slider-handle").css("left",m.bw.downPaymentPercent+"%"),t=m.bw.downPaymentPercent/100,m.bw.downPayment=t*m.bw.loanAmount,g(this).val(S(m.bw.downPaymentPercent)),m.bw.downPayment=m.bw.downPaymentPercent*m.bw.loanAmount/100,g("#bw-down-payment-amount").val(M(m.bw.downPayment)),g("#bw-down-payment-percent").val(S(t,2)),D()}),g("#bw-state").on("change",function(){m.bw.userState=g(this).val(),m.bw.propertyTaxManual=!1,m.bw.propertyTax=m.bw.loanAmount*_(m.bw.userState)/1200,g("#bw-property-tax").val(M(m.bw.propertyTax)),D()}),g("#bw-interest-rate").on("change",function(){return!G()&&(m.bw.interestRate=Math.max(Math.min(C(g(this).val()),100),.001),m.bw.customRate=!0,g(this).val(F(m.bw.interestRate)),void D())}),g("#bw-property-tax").on("change input",function(){m.bw.propertyTaxManual=!0,m.bw.propertyTax=C(g(this).val()),99<m.bw.propertyTax&&(m.bw.propertyTax=99),g(this).val(M(m.bw.propertyTax)),D()}),g("#bw-home-insurance").on("change input",function(){m.bw.homeInsurance=C(g(this).val()),g(this).val(M(m.bw.homeInsurance)),D()}),g("#bw-homeowners_insurance").on("change input",function(){m.bw.homeInsurance=12*C(g(this).val()),g("#bw-home-insurance").val(M(m.bw.homeInsurance)),D()}),g("#bw-hoa").on("change input",function(){m.bw.hoa=C(g(this).val()),g(this).val(M(m.bw.hoa)),D()}),g("#bw-hoa_other").on("change input",function(){m.bw.hoa=C(g(this).val()),g("#bw-hoa").val(M(m.bw.hoa)),D()}),g("#bw-amortization-report").on("click contextmenu",function(t){t.preventDefault();t={hp:Math.round(m.bw.loanAmount),dp:Math.round(m.bw.downPayment),lt:m.bw.loanTermInMonth,tr:m.bw.propertyTax,yi:m.bw.homeInsurance,hoa:m.bw.hoa,ir:m.bw.interestRate},t=g(this).attr("href")+"?"+g.param(t);return window.open(t),!1}),g(".tooltip").hide(),g(".tooltip-trigger").hover(function(){g(this).next(".tooltip").fadeIn(250)},function(){g(this).next(".tooltip").fadeOut(250)}),jQuery("#m_calc_out_tab-04").on("input",".cus_scroll",function(){var t=jQuery(this).closest(".outer"),e=t.find(".inner").width(),e=(t.find("table").width()-e)/100;t.find(".inner").scrollLeft(jQuery(this).val()*e)});g(this).scrollLeft();function W(t){g("a.current-menu-item").removeClass("current-menu-item");t=window.location.origin+"/mortgage-calculator/#"+t,t=g('a[href="'+t+'"]');(0!=t.length?t:g('a[href="'+window.location.origin+'/mortgage-calculator/"]')).addClass("current-menu-item"),g(window).width()<1055&&g("#navbar-mobile-trigger").hasClass("is-open")&&g("#navbar-mobile-trigger").trigger("click")}function Q(t,e){var n,a=t.val();if((n=t).next(".field-error-msg").remove(),n.removeClass("error"),""!==a)if((a=C(a))<t.attr("min"))N(t,"min",e);else{if(!(a>t.attr("max")))return 1;N(t,"max",e)}else N(t,"required")}function N(t,e,n){var a=page_vars.err[e],o=t.attr(e);"$"==n&&(o=M(o)),"%"==n&&(o+="%"),"min"!=e&&"max"!=e||(a=a.replace("%value",o)),g(a='<div class="field-error-msg error">'+a+"</div>").insertAfter(t),t.addClass("error")}function q(t){t.hasOwnProperty("city")&&t.city&&t.hasOwnProperty("state")&&t.state&&t.hasOwnProperty("zip_code")&&t.zip_code&&(g("#zip-code-id").val(t.zip_code),g("#gen_state").val(t.state_code),o=t.state_code)}function J(t){var e=t.attr("max"),e=t.val()/e*100;t.closest(".field").find(".ui-slider-range").css("width",e+"%"),t.closest(".field").find(".ui-slider-handle").css("left",e+"%")}function U(){return 0<g("#form_hp input.error").length}function Z(){return 0<g("#form_aff input.error").length}function X(){return 0<g("#form_mp input.error").length}function G(){return 0<g("#form_bw input.error").length}g("#m_calc_out_tab-04").on("touchmove",".inner",function(){var t=jQuery(this).closest(".outer"),e=(t.find("table").width(),g(".cus_scroll").width()),e=(e-214)/e;t.find(".cus_scroll").val(g(this).scrollLeft()*e)}),g("#annual-content").on("touchmove",".inner",function(){var t=jQuery(this).closest(".outer"),t=(t.find("table").width(),t.find(".cus_scroll").width()),t=(t-214)/t,t=parseInt(g(this).scrollLeft()*t);g("#annual-content").find("#ann_scroll").val(t)}),jQuery("#annual-content").on("input","#ann_scroll",function(){var t=jQuery(this).closest(".outer"),e=(650-t.find(".inner").width())/100;t.find(".inner").scrollLeft(jQuery(this).val()*e)}),g("#mp-ty-monthly-payment").on("change",function(){m.mp.epToYourMonthlyPayment=C(g(this).val()),g(this).val(M(m.mp.epToYourMonthlyPayment))}),g("#mp-eyp-monthly-payment").on("change",function(){m.mp.epAsAnExtraYearlyPayment=C(g(this).val()),g(this).val(M(m.mp.epAsAnExtraYearlyPayment))}),g("#mp-ot-monthly-payment").on("change",function(){m.mp.epAsOneTimePaymentIn=C(g(this).val()),g(this).val(M(m.mp.epAsOneTimePaymentIn))}),g("#mp-axp-calc").on("click",function(t){t.preventDefault(),m.mp.epApply=!0,m.mp.epOccurringEvery=C(g('select[name="mp-occuring-every"]').val()),m.mp.epAsOneTimePaymentMonth=C(g('select[name="mp-one-time-month"]').val()),m.mp.epAsOneTimePaymentYear=C(g('select[name="mp-one-time-year"]').val()),O(m.mp.loanTermInMonth/12,"mp-est"),Y()}),document.addEventListener("keydown",function(t){9===t.keyCode&&g("body").addClass("input-focus-outlines")}),document.addEventListener("click",function(t){g("body").removeClass("input-focus-outlines")}),g("a.current-menu-item").removeClass("current-menu-item"),window.location.hash&&(h=window.location.hash,["#by-income","#by-monthly-payment","#bi-weekly-payment"].includes(h)&&(P(h=h.replace("#","")),setTimeout(function(){return g("html, body").animate({scrollTop:0},300),!1},0))),g('a[href="'+window.location.href+'"]').addClass("current-menu-item"),g("a.tab_current").on("click",function(t){t.preventDefault(),g("a.current-menu-item").removeClass("current-menu-item");var e=g(this).addClass("current-menu-item").attr("href"),n=e.search("#"),t=e.length;P(e=e.substring(n+1,t)),g(this).closest("li.menu-item-has-children").trigger("click"),setTimeout(function(){return g("html, body").animate({scrollTop:0},300),!1},0)}),g("#hp-loan-amount").on("input change",function(){Q(g(this),"$")}),g("#hp-down-payment-amount").on("input change",function(){Q(g(this),"$")}),g("#hp-down-payment-percent").on("input change",function(){Q(g(this),"%")}),g("#hp-interest-rate").on("input change",function(){Q(g(this),"%")}),g("#hp-property-tax").on("input change",function(){Q(g(this),"%")}),g("#hp-home-insurance").on("input change",function(){Q(g(this),"$")}),g("#hp-hoa").on("input change",function(){Q(g(this),"$")}),g("#i-income").on("input change",function(){Q(g(this),"$")}),g("#i-down-payment-amount").on("input",function(){Q(g(this),"$")}),g("#i-monthly-debts").on("input",function(){Q(g(this),"$")}),g("#i-debt-to-income").on("input change",function(){Q(g(this),"%")}),g("#i-interest-rate").on("input change",function(){Q(g(this),"%")}),g("#i-property-tax").on("input change",function(){Q(g(this),"%")}),g("#i-home-insurance").on("input change",function(){Q(g(this),"$")}),g("#i-hoa").on("input change",function(){Q(g(this),"$")}),g("#mp-monthly-payment").on("input change",function(){Q(g(this),"$")}),g("#mp-down-payment-amount").on("input change",function(){Q(g(this),"$")}),g("#mp-down-payment-percent").on("input change",function(){Q(g(this),"%")}),g("#mp-interest-rate").on("input change",function(){Q(g(this),"%")}),g("#mp-eyp-monthly-payment").on("input change",function(){Q(g(this),"$")}),g("#mp-property-tax").on("input change",function(){Q(g(this),"%")}),g("#mp-home-insurance").on("input change",function(){Q(g(this),"$")}),g("#mp-hoa").on("input change",function(){Q(g(this),"$")}),g("#mp-ty-monthly-payment").on("input change",function(){Q(g(this),"$")}),g("#mp-ot-monthly-payment").on("input change",function(){Q(g(this),"$")}),g("#bw-loan-amount").on("input change",function(){Q(g(this),"$")}),g("#bw-down-payment-amount").on("input change",function(){Q(g(this),"$")}),g("#bw-down-payment-percent").on("input change",function(){Q(g(this),"%")}),g("#bw-interest-rate").on("input change",function(){Q(g(this),"%")}),Array.from||(Array.from=function(){var p;try{p=Symbol.iterator||"Symbol(Symbol.iterator)"}catch(t){p="Symbol(Symbol.iterator)"}function c(t){return"function"==typeof t||"[object Function]"===e.call(t)}function s(t){return t=function(t){t=Number(t);return isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t}(t),Math.min(Math.max(t,0),n)}var e=Object.prototype.toString,n=Math.pow(2,53)-1;return function(t){var e=Object(t),n=c(e[p]);if(null==t&&!n)throw new TypeError("Array.from requires an array-like object or iterator - not null or undefined");var a,o=1<arguments.length?arguments[1]:void 0;if(void 0!==o){if(!c(o))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(a=arguments[2])}var r,i,l,t=s(e.length);return function(t,e,n,a,o,r){for(var i=0;i<n||o;){var l=a(i),p=o?l.value:l;if(o&&l.done)return e;e[i]=r?void 0===t?r(p,i):r.call(t,p,i):p,i+=1}if(o)throw new TypeError("Array.from: provided arrayLike or iterator has length more then 2 ** 52 - 1");return e.length=n,e}(a,c(this)?Object(new this(t)):new Array(t),t,(i=e,l=(r=n)&&i[p](),function(t){return r?l.next():i[t]}),n,o)}}()),init_range_sliders(),g(document).click(function(t){g(t.target).is("#mortgage-calculator-city-search-list")||g(t.target).is("#loc_name")||g(t.target).is("#city-search_field")||(g("#loc_name").removeClass("active"),g(".mortgage-calculator-city-search").hide(0))}),g("#faq_section .faq-title").click(function(){jQuery(this).parent().toggleClass("active"),jQuery(this).parent().find(".faq-content").slideToggle(300)}),g(document).on("click",".mortgage_report__shedule-table-info .close",function(t){g(this).parent().remove(),t.preventDefault()}),g(document).on("geolocation_received",function(t,e){q(e),_(o),(m={hp:{calculated:!1,calculated_first_time:!0,loanAmount:C(g("#hp-loan-amount").val()),downPayment:C(g("#hp-down-payment-amount").val()),downPaymentPercent:C(g("#hp-down-payment-percent").val()),loanTermInMonth:C(g("#hp-loanTermInMonths").val()),userState:o,interestRate:C(g("#hp-interest-rate").val()),propertyTaxManual:!1,propertyTax:0,propertyTaxPercent:0,homeInsurance:C(g("#hp-home-insurance").val()),hoa:C(g("#hp-hoa").val()),hpChart:!1,monthlyPayment:0,customRate:!1},i:{calculated:!1,income:C(g("#i-income").val()),monthlyDebts:C(g("#i-monthly-debts").val()),debtToIncome:C(g("#i-debt-to-income").val()),data_type:C(g("#i-date-type").val()),loanTermInMonth:C(g("#i-loanTermInMonths").val()),userState:o,interestRate:C(g("#i-interest-rate").val()),downPayment:C(g("#i-down-payment-amount").val()),downPaymentPercent:C(g("#i-down-payment-percent").val()),downPaymentType:"percent",propertyTax:0,propertyTaxPercent:0,propertyTaxCurrency:0,homeInsurance:C(g("#i-home-insurance").val()),hoa:C(g("#i-hoa").val()),loanAmount:0,monthlyPayment:0,customRate:!1},mp:{calculated:!1,monthlyPayment:C(g("#mp-monthly-payment").val()),downPayment:C(g("#mp-down-payment-amount").val()),downPaymentPercent:C(g("#mp-down-payment-percent").val()),downPaymentType:"percent",loanTermInMonth:C(g("#mp-loanTermInMonths").val()),userState:o,interestRate:C(g("#mp-interest-rate").val()),propertyTax:0,propertyTaxPercent:0,homeInsurance:C(g("#mp-home-insurance").val()),hoa:C(g("#mp-hoa").val()),loanAmount:0,principalAndInterest:0,customRate:!1,epApply:!1,epToYourMonthlyPayment:0,epAsAnExtraYearlyPayment:0,epOccurringEvery:0,epAsOneTimePaymentIn:0,epAsOneTimePaymentMonth:0,epAsOneTimePaymentYear:0},bw:{calculated:!1,loanAmount:C(g("#bw-loan-amount").val()),downPayment:C(g("#bw-down-payment-amount").val()),downPaymentPercent:C(g("#bw-down-payment-percent").val()),downPaymentType:"percent",loanTermInMonth:C(g("#bw-loanTermInMonths").val()),userState:o,interestRate:C(g("#bw-interest-rate").val()),propertyTaxManual:!1,propertyTax:0,propertyTaxPercent:0,homeInsurance:C(g("#bw-home-insurance").val()),hoa:C(g("#bw-hoa").val()),hpChart:!1,monthlyPayment:0,customRate:!1}}).hp.propertyTax=m.hp.loanAmount*_(m.hp.userState)/1200,m.hp.propertyTaxPercent=_(m.hp.userState),m.i.propertyTaxPercent=_(m.hp.userState),m.bw.propertyTaxPercent=_(m.hp.userState),m.mp.propertyTaxPercent=_(m.hp.userState),g("#hp-property-tax").val(m.hp.propertyTaxPercent),g("#i-property-tax").val(S(m.i.propertyTaxPercent)),g("#mp-property-tax").val(S(m.mp.propertyTaxPercent)),g("#bw-property-tax").val(S(m.bw.propertyTaxPercent)),g("#pb-property-tax").val(S(m.hp.propertyTax));var n=e.state_code,a=g("#hp-loanTermInMonths"),a=(g("#hp-interest-rate"),g(".form_bar"),a.val()),a=page_vars.mortgageRatesByState.hasOwnProperty(n)?page_vars.mortgageRatesByState[n][{360:"Fixed30Year",240:"Fixed20Year",180:"Fixed15Year",120:"Fixed10Year"}[a]]:{apr:0,rate:0};l.val(a.rate),p.val(a.rate),c.val(a.rate),s.val(a.rate),b(e.zip_code)}),0==sm_user_geo_loading&&getCookie("geolocation")&&q(sm_get_user_geolocation()),g("input.percentage").inputFilter(function(t){return/^\d*\.?\d*%?$/.test(t)}),g("input.currency").inputFilter(function(t){return/^\$?\d*\.?\d*$/.test(t.replace(",",""))}),g(document).on("keydown","input.currency",function(t){if(t.hasOwnProperty("keyCode")&&188==t.keyCode)return!1})}),$(window).on("resize",function(){init_range_sliders()}),$(window).on("orientationchange",function(){init_range_sliders()},!1);